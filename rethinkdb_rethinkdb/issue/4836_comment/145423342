IssueComment
  { issueCommentUpdatedAt = 2015 (-10) (-05) 03 : 53 : 13 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 1407281
        , simpleUserLogin = N "eddyfosman"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/1407281?v=3"
        , simpleUserUrl = "https://api.github.com/users/eddyfosman"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/145423342"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/issues/4836#issuecomment-145423342"
  , issueCommentCreatedAt = 2015 (-10) (-05) 03 : 53 : 13 UTC
  , issueCommentBody =
      "@danielmewes Yes, it's already mentioned from the begin of the tut, but there is a problem.\r\n\r\nI use this EC2 image CentOS 7 x86_64 (2014_09_29) EBS HVM-b7ee8a69-ee97-4a49-9e68-afaee216db2e-ami-d2a117ba.2 (ami-96a818fe)\r\n\r\n- After logined as user \"centos\" then sudo su, I installed rethinkdb and did the \"Basic setup\" in \"Startup with systemd\" tut :\r\n\r\n[root@ip-172-30-1-238 centos]# vi /usr/lib/tmpfiles.d/rethinkdb.conf\r\n[root@ip-172-30-1-238 centos]# vi /usr/lib/systemd/system/rethinkdb@.service\r\n[root@ip-172-30-1-238 centos]# chmod 644 /usr/lib/systemd/system/rethinkdb@.service\r\n\r\n- At the next step, I created a db \"test_rethinkdb\" at /root :\r\n\r\n[root@ip-172-30-1-238 centos]# cd ~\r\n[root@ip-172-30-1-238 ~]# rethinkdb create -d test_rethinkdb\r\nRecursively removing directory test_rethinkdb/tmp\r\n[root@ip-172-30-1-238 ~]# ls\r\ntest_rethinkdb\r\n[root@ip-172-30-1-238 ~]# sudo chown -R rethinkdb.rethinkdb test_rethinkdb/\r\n\r\n- Then I created the conf file:\r\n\r\n[root@ip-172-30-1-238 ~]# sudo cp /etc/rethinkdb/default.conf.sample /etc/rethinkdb/instances.d/test_rethinkdb.conf\r\n[root@ip-172-30-1-238 ~]# vi /etc/rethinkdb/instances.d/test_rethinkdb.conf\r\n\r\n- I edited it: \r\n\r\ndirectory=/root/test_rethinkdb\r\n\r\n- I started the daemon:\r\n\r\n[root@ip-172-30-1-238 ~]# systemctl enable rethinkdb@test_rethinkdb\r\nln -s '/usr/lib/systemd/system/rethinkdb@.service' '/etc/systemd/system/multi-user.target.wants/rethinkdb@test_rethinkdb.service'\r\n[root@ip-172-30-1-238 ~]# systemctl start rethinkdb@test_rethinkdb\r\n[root@ip-172-30-1-238 ~]# service rethinkdb@test_rethinkdb status -l\r\nRedirecting to /bin/systemctl status  -l rethinkdb@test_rethinkdb.service\r\nrethinkdb@test_rethinkdb.service - RethinkDB database server for instance 'test_rethinkdb'\r\n   Loaded: loaded (/usr/lib/systemd/system/rethinkdb@.service; enabled)\r\n   Active: failed (Result: exit-code) since Mon 2015-10-05 03:15:43 UTC; 31s ago\r\n  Process: 1205 ExecStart=/usr/bin/rethinkdb serve --config-file /etc/rethinkdb/instances.d/%i.conf (code=exited, status=1/FAILURE)\r\n Main PID: 1205 (code=exited, status=1/FAILURE)\r\n\r\nOct 05 03:15:43 ip-172-30-1-238 systemd[1]: Started RethinkDB database server for instance 'test_rethinkdb'.\r\nOct 05 03:15:43 ip-172-30-1-238 rethinkdb[1205]: The directory '/root/test_rethinkdb' does not exist, run 'rethinkdb create -d \"/root/test_rethinkdb\"' and try again.\r\nOct 05 03:15:43 ip-172-30-1-238 systemd[1]: rethinkdb@test_rethinkdb.service: main process exited, code=exited, status=1/FAILURE\r\nOct 05 03:15:43 ip-172-30-1-238 systemd[1]: Unit rethinkdb@test_rethinkdb.service entered failed state.\r\n\r\n- I checked again the directory '/root/test_rethinkdb' :\r\n\r\n[root@ip-172-30-1-238 test_rethinkdb]# cd /root\r\n[root@ip-172-30-1-238 ~]# ls -la\r\ntotal 28\r\ndr-xr-x---.  4 root      root      4096 Oct  5 03:12 .\r\ndrwxr-xr-x. 17 root      root      4096 Oct  5 02:59 ..\r\n-rw-r--r--.  1 root      root        18 Dec 29  2013 .bash_logout\r\n-rw-r--r--.  1 root      root       176 Dec 29  2013 .bash_profile\r\n-rw-r--r--.  1 root      root       176 Dec 29  2013 .bashrc\r\n-rw-r--r--.  1 root      root       100 Dec 29  2013 .cshrc\r\ndrwx------.  2 root      root        28 Oct  5 03:00 .ssh\r\n-rw-r--r--.  1 root      root       129 Dec 29  2013 .tcshrc\r\ndrwxr-xr-x.  3 rethinkdb rethinkdb   46 Oct  5 03:12 test_rethinkdb\r\n\r\n- After rebooted, it's still the same. I almost gave up, so I tried the default directory \"/var/lib/rethinkdb/\".\r\n\r\n[root@ip-172-30-1-238 centos]# cd /var/lib/rethinkdb/\r\n[root@ip-172-30-1-238 rethinkdb]# rethinkdb create -d again_test_rethinkdb\r\nRecursively removing directory again_test_rethinkdb/tmp\r\n[root@ip-172-30-1-238 rethinkdb]# sudo chown -R rethinkdb.rethinkdb again_test_rethinkdb/\r\n[root@ip-172-30-1-238 rethinkdb]# sudo cp /etc/rethinkdb/default.conf.sample /etc/rethinkdb/instances.d/again_test_rethinkdb.conf\r\n[root@ip-172-30-1-238 rethinkdb]# vi /etc/rethinkdb/instances.d/again_test_rethinkdb.conf\r\ndirectory=/var/lib/rethinkdb/again_test_rethinkdb\r\n[root@ip-172-30-1-238 rethinkdb]# systemctl enable rethinkdb@again_test_rethinkdb\r\nln -s '/usr/lib/systemd/system/rethinkdb@.service' '/etc/systemd/system/multi-user.target.wants/rethinkdb@again_test_rethinkdb.service'\r\n[root@ip-172-30-1-238 rethinkdb]# systemctl start rethinkdb@again_test_rethinkdb\r\n[root@ip-172-30-1-238 rethinkdb]# service rethinkdb@again_test_rethinkdb status -l\r\nRedirecting to /bin/systemctl status  -l rethinkdb@again_test_rethinkdb.service\r\nrethinkdb@again_test_rethinkdb.service - RethinkDB database server for instance 'again_test_rethinkdb'\r\n   Loaded: loaded (/usr/lib/systemd/system/rethinkdb@.service; enabled)\r\n   Active: active (running) since Mon 2015-10-05 03:45:52 UTC; 23s ago\r\n Main PID: 1074 (rethinkdb)\r\n   CGroup: /system.slice/system-rethinkdb.slice/rethinkdb@again_test_rethinkdb.service\r\n           \9500\9472\&1074 /usr/bin/rethinkdb serve --config-file /etc/rethinkdb/instances.d/again_test_rethinkdb.conf\r\n           \9500\9472\&1075 /usr/bin/rethinkdb serve --config-file /etc/rethinkdb/instances.d/again_test_rethinkdb.conf\r\n           \9492\9472\&1146 /usr/bin/rethinkdb serve --config-file /etc/rethinkdb/instances.d/again_test_rethinkdb.conf\r\n\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: Running on Linux 3.10.0-123.8.1.el7.x86_64 x86_64\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: Loading data from directory /var/lib/rethinkdb/again_test_rethinkdb\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: warn: Cache size does not leave much memory for server and query overhead (available memory: 867 MB).\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: warn: Cache size is very low and may impact performance.\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: Listening for intracluster connections on port 29015\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: Listening for client driver connections on port 28015\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: Listening for administrative HTTP connections on port 8080\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: Listening on addresses: 127.0.0.1, ::1\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: To fully expose RethinkDB on the network, bind to all addresses by adding `bind=all' to the config file (/etc/rethinkdb/instances.d/again_test_rethinkdb.conf).\r\nOct 05 03:45:52 ip-172-30-1-238.ec2.internal rethinkdb[1074]: Server ready, \"ip_172_30_1_238_ec2_internal_8i7\" fb5b6e2e-ba81-481a-9ff2-72e4ff23b020\r\n\r\n- So when use default directory, it worked. Until now, I still don't know why I couldn't use the custom directory \"/root/test_rethinkdb\" as following the tut.\r\n\r\nThank you for listening!\r\n"
  , issueCommentId = 145423342
  }