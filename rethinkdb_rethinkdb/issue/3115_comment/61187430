IssueComment
  { issueCommentUpdatedAt = 2014 (-10) (-30) 23 : 23 : 06 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 505365
        , simpleUserLogin = N "danielmewes"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/505365?v=3"
        , simpleUserUrl = "https://api.github.com/users/danielmewes"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/61187430"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/issues/3115#issuecomment-61187430"
  , issueCommentCreatedAt = 2014 (-10) (-30) 23 : 23 : 06 UTC
  , issueCommentBody =
      "A ratio between 0 and 1 is fine too, though I think percentages are more intuitive.\r\n\r\n@coffeemug What would be the content of the `identifier_format` field? Everywhere else we use `table_name`, `table_id` etc. for cross references.\r\n\r\n\r\nI think the question of how to expose backfill jobs needs a bit more thought.\r\nShould we merge them to have no more than one document per table, even if there are multiple backfill receivers and/or backfill senders involved? Or should we create one document for every pair of backfill sender and backfill receiver? Or only one per backfill receiver, with the list of all corresponding backfill sender servers appended to the `servers` list in the `jobs` table?\r\n\r\nHere's an example for these different options:\r\nSuppose we have three servers A, B and C with a single table t.\r\nSuppose Server C is backfilling some shards from servers A and B (different shards from each), and at the same time server B is backfilling some shard from server C.\r\n\r\n* Option 1: One document per table:\r\n```\r\n{\r\n  id: ...,\r\n  machine: [\"A\", \"B\", \"C\"],\r\n  type: \"backfill\",\r\n  details: {\r\n    backfill_sources: [\"A\", \"B\", \"C\"],\r\n    backfill_receivers: [\"B\", \"C\"],\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n}\r\n```\r\n* Option 2: One document per backfill_receiver/table pair:\r\n```\r\n{\r\n  id: ...,\r\n  machine: [\"A\", \"B\", \"C\"],\r\n  type: \"backfill\",\r\n  details: {\r\n    backfill_sources: [\"A\", \"B\"],\r\n    backfill_receiver: \"C\",\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n},\r\n{\r\n  id: ...,\r\n  machine: [\"B\", \"C\"],\r\n  type: \"backfill\",\r\n  details: {\r\n    backfill_sources: [\"C\"],\r\n    backfill_receiver: \"B\",\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n}\r\n```\r\n* Option 3: One document per backfill source/receiver pair:\r\n```\r\n{\r\n  id: ...,\r\n  machine: [\"A\", \"C\"],\r\n  type: \"backfill\",\r\n  details: {\r\n    backfill_source: \"A\",\r\n    backfill_receiver: \"C\",\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n},\r\n{\r\n  id: ...,\r\n  machine: [\"B\", \"C\"],\r\n  type: \"backfill\",\r\n  details: {\r\n    backfill_source: \"B\",\r\n    backfill_receiver: \"C\",\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n},\r\n{\r\n  id: ...,\r\n  machine: [\"B\", \"C\"],\r\n  type: \"backfill\",\r\n  details: {\r\n    backfill_source: \"C\",\r\n    backfill_receiver: \"B\",\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n}\r\n```\r\n\r\nThese are the options if we merge backfill receiver and sender. If we have them as separate documents, it could instead look like this (let's say we have one document per receiver/table pair and per sender/table pair, there again are variations of this):\r\n```\r\n{\r\n  id: ...,\r\n  machine: [\"A\"],\r\n  type: \"backfill_outgoing\",\r\n  details: {\r\n    backfill_receiver: \"C\",\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n},\r\n{\r\n  id: ...,\r\n  machine: [\"B\"],\r\n  type: \"backfill_outgoing\",\r\n  details: {\r\n    backfill_receiver: \"C\",\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n},\r\n{\r\n  id: ...,\r\n  machine: [\"C\"],\r\n  type: \"backfill_outgoing\",\r\n  details: {\r\n    backfill_receiver: \"A\",\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n}\r\n{\r\n  id: ...,\r\n  machine: [\"A\"],\r\n  type: \"backfill_incoming\",\r\n  details: {\r\n    backfill_senders: [\"C\"],\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n},\r\n{\r\n  id: ...,\r\n  machine: [\"C\"],\r\n  type: \"backfill_incoming\",\r\n  details: {\r\n    backfill_senders: [\"A\", \"B\"],\r\n    progress: ...,\r\n    some_identifier_for_table_id_etc: ...\r\n  },\r\n  duration: ...\r\n}\r\n```"
  , issueCommentId = 61187430
  }