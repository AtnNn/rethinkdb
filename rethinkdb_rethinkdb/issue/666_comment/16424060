IssueComment
  { issueCommentUpdatedAt = 2013 (-04) (-16) 02 : 58 : 40 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 552910
        , simpleUserLogin = N "Tryneus"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/552910?v=3"
        , simpleUserUrl = "https://api.github.com/users/Tryneus"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/16424060"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/issues/666#issuecomment-16424060"
  , issueCommentCreatedAt = 2013 (-04) (-16) 02 : 58 : 40 UTC
  , issueCommentBody =
      "Alright, this change might still be necessary to fix the bug, but there is more to the problem.  When running with a debug build, I get the following backtrace with and without the above fix:\r\n\r\n```c\r\nerror: Error in ../src/concurrency/pubsub.hpp at line 81:\r\nerror: Assertion failed: [subscriptions.empty()] \r\nerror: Backtrace:\r\nerror: Mon Apr 15 19:54:49 2013\r\n       \r\n       1: lazy_backtrace_t::lazy_backtrace_t() at backtrace.cc:249\r\n       2: format_backtrace(bool) at backtrace.cc:196\r\n       3: report_fatal_error(char const*, int, char const*, ...) at errors.cc:71\r\n       4: publisher_t<signal_t::subscription_t*>::~publisher_t() at pubsub.hpp:81\r\n       5: publisher_controller_t<signal_t::subscription_t*>::~publisher_controller_t() at pubsub.hpp:100\r\n       6: signal_t::~signal_t() at signal.hpp:85\r\n       7: fifo_enforcer_sink_t::exit_write_t::~exit_write_t() at fifo_enforcer.cc:151\r\n       8: object_buffer_t<fifo_enforcer_sink_t::exit_write_t>::reset() at object_buffer.hpp:105\r\n       9: object_buffer_t<fifo_enforcer_sink_t::exit_write_t>::destruction_sentinel_t::~destruction_sentinel_t() at object_buffer.hpp:21\r\n       10: btree_store_t<rdb_protocol_t>::acquire_sindex_block_for_write(write_token_pair_t*, scc_transaction_t<mc_cache_t>*, scoped_ptr_t<scc_buf_lock_t<mc_cache_t> >*, unsigned int, signal_t*) at btree_store.cc:275\r\n       11: rdb_modification_report_cb_t::on_mod_report(rdb_modification_report_t const&) at btree.cc:810\r\n       12: do_a_replace_from_batched_replace(auto_drainer_t::lock_t, fifo_enforcer_sink_t*, fifo_enforcer_write_token_t const&, slice_timestamp_txn_replace_t, superblock_t*, ql::env_t*, promise_t<superblock_t*>*, Datum*, rdb_modification_report_cb_t*) at btree.cc:301\r\n       13: void boost::_bi::list9<boost::_bi::value<auto_drainer_t::lock_t>, boost::_bi::value<fifo_enforcer_sink_t*>, boost::_bi::value<fifo_enforcer_write_token_t>, boost::_bi::value<slice_timestamp_txn_replace_t>, boost::_bi::value<superblock_t*>, boost::_bi::value<ql::env_t*>, boost::_bi::value<promise_t<superblock_t*>*>, boost::_bi::value<Datum*>, boost::_bi::value<rdb_modification_report_cb_t*> >::operator()<void (*)(auto_drainer_t::lock_t, fifo_enforcer_sink_t*, fifo_enforcer_write_token_t const&, slice_timestamp_txn_replace_t, superblock_t*, ql::env_t*, promise_t<superblock_t*>*, Datum*, rdb_modification_report_cb_t*), boost::_bi::list0>(boost::_bi::type<void>, void (*&)(auto_drainer_t::lock_t, fifo_enforcer_sink_t*, fifo_enforcer_write_token_t const&, slice_timestamp_txn_replace_t, superblock_t*, ql::env_t*, promise_t<superblock_t*>*, Datum*, rdb_modification_report_cb_t*), boost::_bi::list0&, int) at bind.hpp:827\r\n       14: boost::_bi::bind_t<void, void (*)(auto_drainer_t::lock_t, fifo_enforcer_sink_t*, fifo_enforcer_write_token_t const&, slice_timestamp_txn_replace_t, superblock_t*, ql::env_t*, promise_t<superblock_t*>*, Datum*, rdb_modification_report_cb_t*), boost::_bi::list9<boost::_bi::value<auto_drainer_t::lock_t>, boost::_bi::value<fifo_enforcer_sink_t*>, boost::_bi::value<fifo_enforcer_write_token_t>, boost::_bi::value<slice_timestamp_txn_replace_t>, boost::_bi::value<superblock_t*>, boost::_bi::value<ql::env_t*>, boost::_bi::value<promise_t<superblock_t*>*>, boost::_bi::value<Datum*>, boost::_bi::value<rdb_modification_report_cb_t*> > >::operator()() at bind_template.hpp:21\r\n       15: callable_action_instance_t<boost::_bi::bind_t<void, void (*)(auto_drainer_t::lock_t, fifo_enforcer_sink_t*, fifo_enforcer_write_token_t const&, slice_timestamp_txn_replace_t, superblock_t*, ql::env_t*, promise_t<superblock_t*>*, Datum*, rdb_modification_report_cb_t*), boost::_bi::list9<boost::_bi::value<auto_drainer_t::lock_t>, boost::_bi::value<fifo_enforcer_sink_t*>, boost::_bi::value<fifo_enforcer_write_token_t>, boost::_bi::value<slice_timestamp_txn_replace_t>, boost::_bi::value<superblock_t*>, boost::_bi::value<ql::env_t*>, boost::_bi::value<promise_t<superblock_t*>*>, boost::_bi::value<Datum*>, boost::_bi::value<rdb_modification_report_cb_t*> > > >::run_action() at runtime_utils.hpp:58\r\n       16: callable_action_wrapper_t::run() at runtime_utils.cc:67\r\n       17: coro_t::run() at coroutines.cc:178\r\nerror: Exiting.\r\n```"
  , issueCommentId = 16424060
  }