Issue
  { issueClosedAt = Just 2015 (-12) (-02) 04 : 55 : 03 UTC
  , issueUpdatedAt = 2016 (-10) (-12) 20 : 00 : 50 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/5154/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/5154"
  , issueClosedBy = Nothing
  , issueLabels =
      [ IssueLabel
          { labelColor = "e102d8"
          , labelUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/labels/tp:bug"
          , labelName = "tp:bug"
          }
      ]
  , issueNumber = 5154
  , issueAssignee =
      Just
        SimpleUser
          { simpleUserId = Id 552910
          , simpleUserLogin = N "Tryneus"
          , simpleUserAvatarUrl =
              "https://avatars.githubusercontent.com/u/552910?v=3"
          , simpleUserUrl = "https://api.github.com/users/Tryneus"
          , simpleUserType = OwnerUser
          }
  , issueUser =
      SimpleUser
        { simpleUserId = Id 811954
        , simpleUserLogin = N "danielcompton"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/811954?v=3"
        , simpleUserUrl = "https://api.github.com/users/danielcompton"
        , simpleUserType = OwnerUser
        }
  , issueTitle =
      "`rethinkdb restore` often fails with \"Cannot perform write: primary replica for shard [\"\", +inf) not available\""
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/5154"
  , issueCreatedAt = 2015 (-11) (-27) 01 : 51 : 23 UTC
  , issueBody =
      Just
        "I'm wanting to restore a database onto my local Macbook Pro. I'm using RethinkDB 2.2.1 and the latest Python driver. \r\n\r\nOften when I run a restore I get an error:\r\n\r\n```\r\n$rethinkdb restore rethinkdb_dump_2015-11-26T19\\:18\\:58.tar.gz --hard-durability\r\nUnzipping archive file...\r\n  Done (0 seconds)\r\nImporting from directory...\r\n[                                        ]   0%\r\n0 rows imported in 108 tables\r\nReQL error during 'import': Cannot perform write: primary replica for shard [\"\", +inf) not available\r\nErrors occurred during import\r\nError: rethinkdb-import failed\r\n```\r\n\r\nI can see the tables being created on the server, and it appears like the restore driver isn't waiting for them to be ready before starting the restore which then causes the ReQL error. Running a second time with `--force` restores the documents successfully, (presumably) as the tables already exist.\r\n\r\nRunning with `--clients 4` perhaps makes it a little less likely to throw an error, but the problem is still there. Let me know if I can provide more information, there is nothing shown in the `rethinkdb` process logs."
  , issueState = "closed"
  , issueId = Id 119118125
  , issueComments = 9
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 505365
                , simpleUserLogin = N "danielmewes"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/505365?v=3"
                , simpleUserUrl = "https://api.github.com/users/danielmewes"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Nothing
          , milestoneOpenIssues = 0
          , milestoneNumber = 114
          , milestoneClosedIssues = 19
          , milestoneDescription = Nothing
          , milestoneTitle = "2.2.2"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/114"
          , milestoneCreatedAt = 2015 (-12) (-15) 22 : 25 : 25 UTC
          , milestoneState = "closed"
          }
  }