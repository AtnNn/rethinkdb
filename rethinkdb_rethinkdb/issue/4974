Issue
  { issueClosedAt = Nothing
  , issueUpdatedAt = 2016 (-04) (-07) 18 : 13 : 04 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/4974/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/4974"
  , issueClosedBy = Nothing
  , issueLabels =
      [ IssueLabel
          { labelColor = "ededed"
          , labelUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/labels/cp:testing"
          , labelName = "cp:testing"
          }
      ]
  , issueNumber = 4974
  , issueAssignee =
      Just
        SimpleUser
          { simpleUserId = Id 7431361
          , simpleUserLogin = N "larkost"
          , simpleUserAvatarUrl =
              "https://avatars.githubusercontent.com/u/7431361?v=3"
          , simpleUserUrl = "https://api.github.com/users/larkost"
          , simpleUserType = OwnerUser
          }
  , issueUser =
      SimpleUser
        { simpleUserId = Id 1777134
        , simpleUserLogin = N "mlucy"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/1777134?v=3"
        , simpleUserUrl = "https://api.github.com/users/mlucy"
        , simpleUserType = OwnerUser
        }
  , issueTitle = "Add more changefeed tests for `include_initial`"
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/4974"
  , issueCreatedAt = 2015 (-10) (-21) 02 : 14 : 22 UTC
  , issueBody =
      Just
        "We should test the behavior of changefeeds with `include_initial` on more thoroughly (see https://github.com/rethinkdb/rethinkdb/issues/3579).\r\n\r\nThese are the types of changefeeds that take drastically different code paths:\r\n* [x] `.get.changes` - done in c6f81544\r\n* [x] `.get_all.changes` (on primary and secondary indexes) - done in c6f81544\r\n* [x] `.table.changes` - done in c6f81544\r\n* [x] `.between.changes` (on primary and secondary indexes) - done in c6f81544\r\n* [x] `.orderby.limit.changes` (on primary and secondary indexes) - done in c6f81544\r\n* [ ] `.union.changes` (ideally a union of most of the above)\r\n* [ ] `.filter.changes` and `.map.changes` (ideally chained on the end of most of the above)\r\n* [ ] `squash: true`\r\n\r\nThese are the interesting workloads that might cause problems, in rough order of importance:\r\n* Include initial on a range when documents are entering and leaving the range (so inserts/deletes and updates that take documents into and out of the range while initialization is happening).\r\n* Include initial on a range when documents are moving back and forth in the range (this should sometimes produce documents with an old val but no new val to indicate that a document has moved from a part of the range we've read to a part we haven't).\r\n* Include initial under heavy write load.\r\n* Include initial when resharding occurs in the middle.\r\n\r\nIn order to actually test the logic, we should probably use largeish tables and smallish batch sizes.\r\n\r\nI think the best way to test this is to pick some property that's easy to calculate (like that all the `a` fields sum to `10000`), come up with an initial set of rows and a set of writes to do on them that we know will produce a table with this property, and then calculate the property with an `include_initial` changefeed started while the writes are ongoing and check that it comes out correctly."
  , issueState = "open"
  , issueId = Id 112497048
  , issueComments = 1
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 1777134
                , simpleUserLogin = N "mlucy"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/1777134?v=3"
                , simpleUserUrl = "https://api.github.com/users/mlucy"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Nothing
          , milestoneOpenIssues = 53
          , milestoneNumber = 68
          , milestoneClosedIssues = 33
          , milestoneDescription = Just ""
          , milestoneTitle = "tests"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/68"
          , milestoneCreatedAt = 2014 (-04) (-25) 22 : 22 : 22 UTC
          , milestoneState = "open"
          }
  }