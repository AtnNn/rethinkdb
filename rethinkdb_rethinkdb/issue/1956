Issue
  { issueClosedAt = Just 2016 (-03) (-24) 00 : 49 : 31 UTC
  , issueUpdatedAt = 2016 (-03) (-24) 00 : 49 : 31 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/1956/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/1956"
  , issueClosedBy = Nothing
  , issueLabels = []
  , issueNumber = 1956
  , issueAssignee = Nothing
  , issueUser =
      SimpleUser
        { simpleUserId = Id 3918958
        , simpleUserLogin = N "Micka33"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/3918958?v=3"
        , simpleUserUrl = "https://api.github.com/users/Micka33"
        , simpleUserType = OwnerUser
        }
  , issueTitle = "Cannot find module 'node-protobuf' in CasperJS"
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/1956"
  , issueCreatedAt = 2014 (-02) (-18) 12 : 59 : 50 UTC
  , issueBody =
      Just
        "Mac OSX `10.8.5`\nnode `v0.10.25`\nnpm `1.3.24`\nrethinkdb `1.11.3 (CLANG 4.2 (clang-425.0.28))` installed via `rethinkdb.pkg`\n\n``` shell\n\10140  npm install rethinkdb\nnpm http GET https://registry.npmjs.org/rethinkdb\n...\nrethinkdb@1.11.0-4 node_modules/rethinkdb\n\9492\9472\9472 protobufjs@2.0.5 (ascli@0.3.0, bytebuffer@2.3.1)\n\10140  \n```\n\nMy casperjs script\n\n``` javascript\nvar casper  = require('casper').create({\n                viewportSize: {width: 1224, height: 1000000},\n                pageSettings: {loadImages:  true, loadPlugins: true, localToRemoteUrlAccessEnabled: true},\n                verbose: true,\n                logLevel: \"debug\"\n              }),\n    redb    = require('rethinkdb');\n\ncasper.start('http://www.google.com/');\ncasper.run(function()\n{\n  this.exit();\n});\n```\n\nWhen I run my script I get this error\n\n``` shell\n\10140  casperjs rethinkdb.js\nError: Cannot find module 'node-protobuf'                                       \n  /Users/micka/Documents/Work/project/phantomjs:/bootstrap.js:289\n  /Users/micka/Documents/Work/project/phantomjs:/bootstrap.js:254 in require\n  /Users/micka/Documents/Work/project/node_modules/rethinkdb/native-protobuf.js:8\n  /Users/micka/Documents/Work/project/node_modules/rethinkdb/native-protobuf.js:21\n\10140  \n```\n\nSo I decided to install the missing module, and this is what I get\n\n``` shell\n\10140  checkItBaby git:(master) npm install node-protobuf\nnpm http GET https://registry.npmjs.org/node-protobuf\nnpm http 200 https://registry.npmjs.org/node-protobuf\nnpm http GET https://registry.npmjs.org/node-protobuf/-/node-protobuf-1.0.10.tgz\nnpm http 200 https://registry.npmjs.org/node-protobuf/-/node-protobuf-1.0.10.tgz\n\n> node-protobuf@1.0.10 install /Users/micka/Documents/Work/project/node_modules/node-protobuf\n> node-gyp rebuild\n\ngyp http GET http://nodejs.org/dist/v0.10.25/node-v0.10.25.tar.gz\ngyp http 200 http://nodejs.org/dist/v0.10.25/node-v0.10.25.tar.gz\n  CXX(target) Release/obj.target/protobuf/protobuf.o\n../protobuf.cpp:7:10: fatal error: 'google/protobuf/dynamic_message.h' file not found\n#include <google/protobuf/dynamic_message.h>\n         ^\n1 error generated.\nmake: *** [Release/obj.target/protobuf/protobuf.o] Error 1\ngyp ERR! build error \ngyp ERR! stack Error: `make` failed with exit code: 2\ngyp ERR! stack     at ChildProcess.onExit (/usr/local/Cellar/node/0.10.25/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:267:23)\ngyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:98:17)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (child_process.js:797:12)\ngyp ERR! System Darwin 12.5.0\ngyp ERR! command \"node\" \"/usr/local/Cellar/node/0.10.25/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\ngyp ERR! cwd /Users/micka/Documents/Work/project/node_modules/node-protobuf\ngyp ERR! node -v v0.10.25\ngyp ERR! node-gyp -v v0.12.2\ngyp ERR! not ok \nnpm ERR! node-protobuf@1.0.10 install: `node-gyp rebuild`\nnpm ERR! Exit status 1\nnpm ERR! \nnpm ERR! Failed at the node-protobuf@1.0.10 install script.\nnpm ERR! This is most likely a problem with the node-protobuf package,\nnpm ERR! not with npm itself.\nnpm ERR! Tell the author that this fails on your system:\nnpm ERR!     node-gyp rebuild\nnpm ERR! You can get their info via:\nnpm ERR!     npm owner ls node-protobuf\nnpm ERR! There is likely additional logging output above.\n\nnpm ERR! System Darwin 12.5.0\nnpm ERR! command \"/usr/local/Cellar/node/0.10.25/bin/node\" \"/usr/local/bin/npm\" \"install\" \"node-protobuf\"\nnpm ERR! cwd /Users/micka/Documents/Work/project\nnpm ERR! node -v v0.10.25\nnpm ERR! npm -v 1.3.24\nnpm ERR! code ELIFECYCLE\nnpm ERR! \nnpm ERR! Additional logging details can be found in:\nnpm ERR!     /Users/micka/Documents/Work/project/npm-debug.log\nnpm ERR! not ok code 0\n\10140  \n```\n\nI get the exact same problems when installing rehtinkdb using brew instead.\nWhat can I do ?\n## EDIT\n\nI realized it works just fine when I require it in the node shell, but it breaks when I try to require it into a casperjs script.\nSo I opened an issue at CasperJS as well.\nHere is the link for cross-reference n1k0/casperjs/issues/836.\n"
  , issueState = "closed"
  , issueId = Id 27791365
  , issueComments = 7
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 706854
                , simpleUserLogin = N "AtnNn"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/706854?v=3"
                , simpleUserUrl = "https://api.github.com/users/AtnNn"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Nothing
          , milestoneOpenIssues = 0
          , milestoneNumber = 64
          , milestoneClosedIssues = 228
          , milestoneDescription =
              Just
                "These issues are no longer relevant to the current version of RethinkDB"
          , milestoneTitle = "outdated"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/64"
          , milestoneCreatedAt = 2014 (-03) (-28) 00 : 17 : 40 UTC
          , milestoneState = "closed"
          }
  }