Issue
  { issueClosedAt = Nothing
  , issueUpdatedAt = 2016 (-04) (-07) 17 : 46 : 17 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/5204/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/5204"
  , issueClosedBy = Nothing
  , issueLabels =
      [ IssueLabel
          { labelColor = "444444"
          , labelUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/labels/tp:performance"
          , labelName = "tp:performance"
          }
      ]
  , issueNumber = 5204
  , issueAssignee =
      Just
        SimpleUser
          { simpleUserId = Id 505365
          , simpleUserLogin = N "danielmewes"
          , simpleUserAvatarUrl =
              "https://avatars.githubusercontent.com/u/505365?v=3"
          , simpleUserUrl = "https://api.github.com/users/danielmewes"
          , simpleUserType = OwnerUser
          }
  , issueUser =
      SimpleUser
        { simpleUserId = Id 5043
        , simpleUserLogin = N "thelinuxlich"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/5043?v=3"
        , simpleUserUrl = "https://api.github.com/users/thelinuxlich"
        , simpleUserType = OwnerUser
        }
  , issueTitle =
      "RethinkDB is overall really really slow with a table containing millions of rows"
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/5204"
  , issueCreatedAt = 2015 (-12) (-12) 16 : 40 : 04 UTC
  , issueBody =
      Just
        "I had a cluster of three google cloud instances with 4-core, 16gb RAM, 200GB SSD disk and got this issue #5195 \r\n\r\nThen I migrated the three machines to 16-core instances and created a test table with the same data as the one on issue #5195, but duplicated to millions(13k turned into 17kk)\r\n\r\nThen I found this issue #5201, which is strange because you advertise that writes don't block reads and vice-versa.\r\n\r\nNow I'm testing the big table:\r\n\r\n```javascript\r\nr.table(\"test_pageviews\").count()\r\n// took 5.5 seconds to return 17749703\r\n\r\nr.table(\"test_pageviews\").between([7,r.time(2015,12,1,\"-02:00\")],[7,r.now()],{index: \"client_id_created_at\"}).count()\r\n// Never completed and also made two instances lock, so I had to restart them\r\n\r\n```\r\nAll tables have 3 shards, 9 replicas. After restarting the locked instances, Some tables have 6 and others have 7 replicas and it doesn't return back to normal. I tried reconfiguring every table, but the issue stands. All instances are with idle CPU\r\nI noticed one of the instances had 15gb RAM consumed of 16gb(cache is set to 10gb) and the others are consuming just 3gb, so I restarted the one almost going to swap.\r\nOnce it restarted, MAGIC! All tables are ready!\r\n\r\nTried the count with secondary index again, reads spike to 19k/second on the Data Explorer, cache goes to 33%(and stays that a long time after the query executed)\r\nI doubt readMode: \"outdated\" will work a miracle here so I didn't test that.\r\nWith this result, I know that even if I made the joined session table a embedded document, it wouldn't help.\r\n\r\nNow I tried to execute the original query of issue #5195. Reads spiked to 33k/second on the Data Explorer, all 16 cores of the instance I'm running the script spike to ~35%. The instance where I was running the script went down with this error \"rethinkdb: Memory allocation failed. This usually means that we have run out of RAM. Aborting.\", 10gb RAM weren't enough for those 2 million records.\r\n\r\n\r\n\r\n\r\n\r\n"
  , issueState = "open"
  , issueId = Id 121865255
  , issueComments = 15
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 48436
                , simpleUserLogin = N "coffeemug"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/48436?v=3"
                , simpleUserUrl = "https://api.github.com/users/coffeemug"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Nothing
          , milestoneOpenIssues = 268
          , milestoneNumber = 41
          , milestoneClosedIssues = 0
          , milestoneDescription =
              Just
                "Issues in this milestone will be revisited after each major release during the planning stage for the major release after it. They will be moved to a specific release milestone if chosen for that release."
          , milestoneTitle = "subsequent"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/41"
          , milestoneCreatedAt = 2013 (-06) (-30) 07 : 32 : 52 UTC
          , milestoneState = "open"
          }
  }