IssueComment
  { issueCommentUpdatedAt = 2014 (-11) (-14) 00 : 26 : 40 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 316661
        , simpleUserLogin = N "timmaxw"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/316661?v=3"
        , simpleUserUrl = "https://api.github.com/users/timmaxw"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/62991798"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/issues/3324#issuecomment-62991798"
  , issueCommentCreatedAt = 2014 (-11) (-14) 00 : 26 : 34 UTC
  , issueCommentBody =
      "It looks like the problem is that we're doing `ASSERT_EQ` on a `boost::optional<int>`, which tries to write `boost::optional<int>` to a `std::ostream`; and for some reason this fails with the version of Boost that's on Mac OS X. One solution is to replace `ASSERT_EQ(x,y)` with `ASSERT_TRUE(x == y)`. @larkost, can you check if this patch fixes the problem?\r\n\r\n```\r\ndiff --git a/src/unittest/rpc_directory.cc b/src/unittest/rpc_directory.cc\r\nindex 023afb3..0065029 100644\r\n--- a/src/unittest/rpc_directory.cc\r\n+++ b/src/unittest/rpc_directory.cc\r\n@@ -112,22 +112,22 @@ TPTEST(RPCDirectoryTest, MapUpdate) {\r\n     cr2.join(get_cluster_local_address(&c1));\r\n     cr3.join(get_cluster_local_address(&c1));\r\n     let_stuff_happen();\r\n-    ASSERT_EQ(boost::optional<int>(1),\r\n+    ASSERT_TRUE(boost::optional<int>(1) ==\r\n         rm2.get_root_view()->get_key(std::make_pair(c1.get_me(), 101)));\r\n-    ASSERT_EQ(boost::optional<int>(),\r\n+    ASSERT_TRUE(boost::optional<int>() ==\r\n         rm2.get_root_view()->get_key(std::make_pair(c1.get_me(), 102)));\r\n     w1.set_key(101, 2);\r\n     w1.set_key(102, 1);\r\n     let_stuff_happen();\r\n-    ASSERT_EQ(boost::optional<int>(2),\r\n+    ASSERT_TRUE(boost::optional<int>(2) ==\r\n         rm2.get_root_view()->get_key(std::make_pair(c1.get_me(), 101)));\r\n-    ASSERT_EQ(boost::optional<int>(1),\r\n+    ASSERT_TRUE(boost::optional<int>(1) ==\r\n         rm2.get_root_view()->get_key(std::make_pair(c1.get_me(), 102)));\r\n     w1.delete_key(101);\r\n     let_stuff_happen();\r\n-    ASSERT_EQ(boost::optional<int>(),\r\n+    ASSERT_TRUE(boost::optional<int>() ==\r\n         rm2.get_root_view()->get_key(std::make_pair(c1.get_me(), 101)));\r\n-    ASSERT_EQ(boost::optional<int>(1),\r\n+    ASSERT_TRUE(boost::optional<int>(1) ==\r\n         rm2.get_root_view()->get_key(std::make_pair(c1.get_me(), 102)));\r\n }\r\n```"
  , issueCommentId = 62991798
  }