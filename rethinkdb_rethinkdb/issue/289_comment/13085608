IssueComment
  { issueCommentUpdatedAt = 2013 (-02) (-04) 16 : 39 : 11 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 43867
        , simpleUserLogin = N "jdoliner"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/43867?v=3"
        , simpleUserUrl = "https://api.github.com/users/jdoliner"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/13085608"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/issues/289#issuecomment-13085608"
  , issueCommentCreatedAt = 2013 (-02) (-04) 16 : 39 : 11 UTC
  , issueCommentBody =
      "For the time being this is expected behavior we don't have a way to\r\nredistribute data without a temporary outage. We have an issue open\r\npertaining to a solution to this (I'll reference when I'm not on a phone).\r\nFor the time being you can workaround this by increasing the replica cont\r\nbefore you shard. This will basically do the distribution of data step\r\nfirst in a way that doesn't create an outage.\r\nOn Feb 4, 2013 6:19 AM, \"Charl Matthee\" <notifications@github.com> wrote:\r\n\r\n> I have four instances of rethinkdb running on four separate hosts:\r\n>\r\n> rdb1, rdb2, rdb3 and rdb4.\r\n>\r\n> Up to now they have been set up with the following roles:\r\n>\r\n> rdb1: Primary, hosts 2 tables t1 and t2, unsharded\r\n> rdb2: Primary\r\n> rdb3: Secondary, hosts replicas of t1 and t2 from rdb1\r\n> rdb4: Secondary\r\n>\r\n> in my installation rdb1 is quite busy.\r\n>\r\n> I then used the web UI to set rdb2 up as a primary that shards tables t1\r\n> and t2. I also set rdb4 up as the replica for t1 and t2 on rdb2.\r\n>\r\n> While all this was running I had an application continuously insert new\r\n> documents into rdb1. This is the kind of error I started seeing over and\r\n> over after a while:\r\n>\r\n> W, [2013-02-04T11:56:55.689000 #10428]  WARN -- : ERR: cannot insert RethinkDB data: cannot perform write: No master available\r\n> Line: /usr/local/rvm/gems/jruby-1.7.2@thoth/gems/thoth-0.0.10/lib/thoth/rethinkdb_tweets_data_source.rb:42:in `insert'\r\n> Query: insert([:default_db, \"users\"], [{\"id\"=>1021840742, \"name\"=>\"BiziTrade\", \"screen_name\"=>\"BiziTrading\", \"profile_image_url\"=>\"http://a0.twimg.com/profile_images/2994341112/f694cbda968ba7ea0179e21c6ba7d04f_normal.png\"}], false)\r\n>                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n> W, [2013-02-04T11:56:55.695000 #10428]  WARN -- : ERR: cannot insert RethinkDB data: cannot perform write: No master available\r\n> Line: /usr/local/rvm/gems/jruby-1.7.2@thoth/gems/thoth-0.0.10/lib/thoth/rethinkdb_tweets_data_source.rb:42:in `insert'\r\n> Query: insert([:default_db, \"users\"], [{\"id\"=>419456084, \"name\"=>\"Free Kindle eBooks\", \"screen_name\"=>\"Free_UK_eBooks\", \"profile_image_url\"=>\"http://a0.twimg.com/profile_images/1653582570/freebooks_normal.jpg\"}], false)\r\n>                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n>\r\n> I've looked through the docs on the site and I did not see anything that\r\n> would explain this as I'd assumed that real-time sharding/replication was\r\n> possible.\r\n>\r\n> \8212\r\n> Reply to this email directly or view it on GitHub<https://github.com/rethinkdb/rethinkdb/issues/289>.\r\n>\r\n>"
  , issueCommentId = 13085608
  }