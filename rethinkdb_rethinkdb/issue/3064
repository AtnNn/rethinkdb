Issue
  { issueClosedAt = Just 2014 (-10) (-31) 20 : 45 : 04 UTC
  , issueUpdatedAt = 2015 (-01) (-02) 21 : 16 : 34 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/3064/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/3064"
  , issueClosedBy = Nothing
  , issueLabels = []
  , issueNumber = 3064
  , issueAssignee = Nothing
  , issueUser =
      SimpleUser
        { simpleUserId = Id 48436
        , simpleUserLogin = N "coffeemug"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/48436?v=3"
        , simpleUserUrl = "https://api.github.com/users/coffeemug"
        , simpleUserType = OwnerUser
        }
  , issueTitle = "ReQL admin feedback, take two"
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/3064"
  , issueCreatedAt = 2014 (-09) (-16) 21 : 36 : 29 UTC
  , issueBody =
      Just
        "I just played with the latest version of reql-admin branch (as of Sep 16). Here's my second round of feedback on the API. Once that's in, we'll probably do one more round, but I feel like the API is getting *really* close.\r\n\r\n__No changes:__\r\n\r\nI think `cluster_config`, `db_config`, and `server_config` tables are great as they are (other than renaming `uuid` to `id`, see below).\r\n\r\n__General changes:__\r\n\r\n- rename `uuid` to `id` in all system tables\r\n- we should use the term `primary_replica` instead of `director` everywhere. We should drop the term `director`.\r\n\r\n__Changes to `table_config`:__\r\n\r\n- rename `director` to `primary_replica`\r\n- there is an open question of how to deal with and present IDs and names (see #3030). I have to talk to @timmaxw and @neumino about it more.\r\n\r\n__Changes to `table_status`:__\r\n\r\nWe should use the following format to display the shard information:\r\n\r\n```py\r\n'shards': [\r\n  {\r\n    'replicas': [{ 'server': {'id': ..., 'name': 'batgirl_local_9d7'}, 'status': 'ready'},\r\n                 { 'server': {'id': ..., 'name': 'batgirl_local_9d8'}, 'status': 'ready'}],\r\n    'primary_replica': {'id': ..., 'name': 'batgirl_local_9d7'}\r\n  }\r\n]\r\n```\r\n\r\nNote that a server with a role `nothing` should just show up as a replica, since the user conceptually thinks of it as a replica offloading data. It should have a proper status (e.g. \"offloading_data\", or whatever reasonable status name we have).\r\n\r\nWe should also group the `ready_*` fields under a nested status field as follows:\r\n\r\n```py\r\n{\r\n    'status': {\r\n      'ready_completely': True,\r\n      'ready_for_outdated_reads': True,\r\n      'ready_for_reads': True,\r\n      'ready_for_writes': True,\r\n  }\r\n}\r\n```\r\n\r\nFinally, we need to add progress information, but there is a separate issue for that (see #2917).\r\n\r\n__Changes to `server_status`:__\r\n\r\nWe should use the following structure:\r\n\r\n```py\r\n{'resources': {\r\n   'cluster_port': 29015,\r\n   'host': u'127.0.0.1',\r\n   'http_admin_port': 8080,\r\n   'reql_port': 28015\r\n   'cache_size_mb': 2042.064453125,\r\n   'pid': 53646,\r\n },\r\n 'status': u'available',\r\n 'connectivity': {\r\n   'time_connected': datetime.datetime(2014, 9, 16, 19, 47, 7, 787000, tzinfo=<rethinkdb.ast.RqlTzinfo object at 0x10e3ed190>),\r\n   'time_disconnected': None,\r\n   'time_started': datetime.datetime(2014, 9, 16, 19, 47, 7, 784000, tzinfo=<rethinkdb.ast.RqlTzinfo object at 0x10e3ed150>),\r\n },\r\n 'name': u'batgirl_local_9d7',\r\n 'id': u'bbab4f0e-3e33-4c5e-bb3d-6bbe8a196af6'}]\r\n```\r\n\r\nAnd here is the structure we should use for a disconnected/unavailable server:\r\n\r\n```py\r\n{ 'status': u'unreachable',\r\n  'resources': {\r\n   'cluster_port': None,\r\n   'host': u'127.0.0.1',\r\n   'http_admin_port': None,\r\n   'reql_port': None,\r\n   'cache_size_mb': None,\r\n   'pid': None,\r\n },\r\n 'connectivity': {\r\n   'time_connected': None,\r\n   'time_disconnected': datetime.datetime(2014, 9, 16, 20, 45, 48, 85000, tzinfo=<rethinkdb.ast.RqlTzinfo object at 0x10e3ed110>),\r\n   'time_started': None,\r\n },\r\n 'name': u'batgirl_local_9d7',\r\n 'id': u'bbab4f0e-3e33-4c5e-bb3d-6bbe8a196af6'}]\r\n```\r\n\r\nNote, I'm assuming that host and port information are canonical (if not, they should be).\r\n\r\nAlso note, we should drop the list of tables from the server status and require a join. It's not the most intuitive way of doing things, but I think we should deal with this separately after we ship v1 of the new API.\r\n\r\n__Changes to `reconfigure`:__\r\n\r\n- We should drop positional arguments to `reconfigure` and instead accept two optargs (`shards` and `replicas`). If one of the two is missing, the system should use the current number of shards/replicas.\r\n- We should implement `reconfigure` on a database. Currently this implementation is missing.\r\n- There is an open question on what to do if no arguments are passed. I think we should reconfigure with existing number of shards and replicas, but this is controversial.\r\n- `reconfigure` (and writing directly to config) should work even if there isn't enough data. It should reshard lexicographically.\r\n\r\n__Status shortcuts:__\r\n\r\nWe should implement `r.db_status()` and `r.db_config()` (equivalent to `table_status`/`table_config`).\r\n\r\nGreat work @timmaxw and everybody!"
  , issueState = "closed"
  , issueId = Id 42936490
  , issueComments = 5
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 48436
                , simpleUserLogin = N "coffeemug"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/48436?v=3"
                , simpleUserUrl = "https://api.github.com/users/coffeemug"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Just 2015 (-01) (-23) 08 : 00 : 00 UTC
          , milestoneOpenIssues = 0
          , milestoneNumber = 81
          , milestoneClosedIssues = 321
          , milestoneDescription = Just ""
          , milestoneTitle = "1.16"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/81"
          , milestoneCreatedAt = 2014 (-09) (-04) 04 : 49 : 30 UTC
          , milestoneState = "closed"
          }
  }