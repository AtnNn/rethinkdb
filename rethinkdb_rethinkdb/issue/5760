Issue
  { issueClosedAt = Nothing
  , issueUpdatedAt = 2016 (-09) (-26) 14 : 44 : 35 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/5760/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/5760"
  , issueClosedBy = Nothing
  , issueLabels = []
  , issueNumber = 5760
  , issueAssignee = Nothing
  , issueUser =
      SimpleUser
        { simpleUserId = Id 1793187
        , simpleUserLogin = N "r-marques"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/1793187?v=3"
        , simpleUserUrl = "https://api.github.com/users/r-marques"
        , simpleUserType = OwnerUser
        }
  , issueTitle =
      "Failed to (un-)protect a coroutine stack (`mprotect` failed with `ENOMEM`)"
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/5760"
  , issueCreatedAt = 2016 (-05) (-11) 16 : 26 : 13 UTC
  , issueBody =
      Just
        "Log output:\r\n```text\r\n2016-05-11T16:05:15.903098372 334.075689s error: Error in src/arch/runtime/context_switching.cc at line 168:\r\n2016-05-11T16:05:15.903098373 334.075691s error: Error in src/arch/runtime/context_switching.cc at line 168:\r\n2016-05-11T16:05:15.903123592 334.075709s error: Error in src/arch/runtime/context_switching.cc at line 168:\r\n2016-05-11T16:05:15.903373200 334.075959s error: Failed to (un-)protect a coroutine stack (`mprotect` failed with `ENOMEM`). Try increasing the value of `/proc/sys/vm/max_map_count`.\r\n2016-05-11T16:05:15.903432642 334.076018s error: Backtrace:\r\n2016-05-11T16:05:15.903425501 334.076011s error: Failed to (un-)protect a coroutine stack (`mprotect` failed with `ENOMEM`). Try increasing the value of `/proc/sys/vm/max_map_count`.\r\n2016-05-11T16:05:15.903481906 334.076067s error: Backtrace:\r\n2016-05-11T16:05:15.903360234 334.075946s error: Failed to (un-)protect a coroutine stack (`mprotect` failed with `ENOMEM`). Try increasing the value of `/proc/sys/vm/max_map_count`.\r\n2016-05-11T16:05:15.903230639 334.075817s error: Error in src/arch/runtime/context_switching.cc at line 168:\r\n2016-05-11T16:05:15.903703814 334.076290s error: Backtrace:\r\n2016-05-11T16:05:15.903741074 334.076327s error: Failed to (un-)protect a coroutine stack (`mprotect` failed with `ENOMEM`). Try increasing the value of `/proc/sys/vm/max_map_count`.\r\n2016-05-11T16:05:15.903979176 334.076565s error: Backtrace:\r\n2016-05-11T16:05:17.836330003 336.008921s error: Wed May 11 16:05:15 2016\\n\\n1 [0xaba5c0]: backtrace_t::backtrace_t() at ??:?\\n2 [0xaba953]: format_backtrace(bool) at ??:?\\n3 [0xd3cdfd]: report_fatal_error(char const*, int, char const*, ...) at ??:?\\n4 [0x9d6006]: artificial_stack_t::enable_overflow_protection() at ??:?\\n5 [0x9d93e4]: coro_t::switch_to_coro_with_protection(artificial_stack_context_ref_t*) at ??:?\\n6 [0x9d985b]: coro_t::notify_now_deprecated() at ??:?\\n7 [0xa88313]: alt::page_t::page_t(alt::page_t*, alt::page_cache_t*, cache_account_t*) at ??:?\\n8 [0xa88409]: alt::page_ptr_t::get_page_for_write(alt::page_cache_t*, cache_account_t*) at ??:?\\n9 [0xa706a4]: buf_write_t::get_data_write() at ??:?\\n10 [0xa4e622]: apply_keyvalue_change(value_sizer_t*, keyvalue_location_t*, btree_key_t const*, repli_timestamp_t, value_deleter_t const*, key_modification_callback_t*, delete_mode_t) at ??:?\\n11 [0x80cb17]: kv_location_delete(keyvalue_location_t*, store_key_t const&, repli_timestamp_t, deletion_context_t const*, delete_mode_t, rdb_modification_info_t*) at ??:?\\n12 [0x80d5e9]: rdb_replace_and_return_superblock(btree_loc_info_t const&, btree_point_replacer_t const*, deletion_context_t const*, promise_t<superblock_t*>*, rdb_modification_info_t*, profile::trace_t*) at ??:?\\n13 [0x815dc8]: do_a_replace_from_batched_replace(auto_drainer_t::lock_t, fifo_enforcer_sink_t*, fifo_enforcer_write_token_t const&, btree_loc_info_t const&, one_replace_t, ql::configured_limits_t const&, promise_t<superblock_t*>*, rdb_modification_report_cb_t*, bool, ql::datum_t*, profile::trace_t*, std::set<std::string, std::less<std::string>, std::allocator<std::string> >*) at ??:?\\n14 [0x816e87]: std::_Function_handler<void (), std::_Bind<void (*(auto_drainer_t::lock_t, fifo_enforcer_sink_t*, fifo_enforcer_write_token_t, btree_loc_info_t, one_replace_t, ql::configured_limits_t, promise_t<superblock_t*>*, rdb_modification_report_cb_t*, bool, ql::datum_t*, profile::trace_t*, std::set<std::string, std::less<std::string>, std::allocator<std::string> >*))(auto_drainer_t::lock_t, fifo_enforcer_sink_t*, fifo_enforcer_write_token_t const&, btree_loc_info_t const&, one_replace_t, ql::configured_limits_t const&, promise_t<superblock_t*>*, rdb_modification_report_cb_t*, bool, ql::datum_t*, profile::trace_t*, std::set<std::string, std::less<std::string>, std::allocator<std::string> >*)> >::_M_invoke(std::_Any_data const&) at ??:?\\n15 [0x81a652]: coro_pool_t<std::function<void ()> >::worker_run(std::function<void ()>, auto_drainer_t::lock_t) at ??:?\\n16 [0x81a8b6]: callable_action_instance_t<std::_Bind<std::_Mem_fn<void (coro_pool_t<std::function<void ()> >::*)(std::function<void ()>, auto_drainer_t::lock_t)> (coro_pool_t<std::function<void ()> >*, std::function<void ()>, auto_drainer_t::lock_t)> >::run_action() at ??:?\\n17 [0x9d9fe7]: coro_t::run() at ??:?\r\n2016-05-11T16:05:17.836806201 336.009391s error: Exiting.\r\n```\r\n\r\nRethinkdb version:\r\n```text\r\n$ rethinkdb --version\r\nrethinkdb 2.3.2~0trusty (GCC 4.8.2)\r\n```\r\n\r\nSetup:\r\n- 3 node cluster\r\n- 3 c3.8xlarge ec2 instance\r\n- one table with 300k documents\r\n- ubuntu 14.04\r\n\r\nThis seems related to #5591 "
  , issueState = "open"
  , issueId = Id 154285872
  , issueComments = 5
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 505365
                , simpleUserLogin = N "danielmewes"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/505365?v=3"
                , simpleUserUrl = "https://api.github.com/users/danielmewes"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Nothing
          , milestoneOpenIssues = 54
          , milestoneNumber = 119
          , milestoneClosedIssues = 8
          , milestoneDescription = Nothing
          , milestoneTitle = "2.3.x"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/119"
          , milestoneCreatedAt = 2016 (-04) (-06) 18 : 05 : 18 UTC
          , milestoneState = "open"
          }
  }