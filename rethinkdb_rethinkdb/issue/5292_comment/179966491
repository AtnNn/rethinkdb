IssueComment
  { issueCommentUpdatedAt = 2016 (-02) (-04) 18 : 28 : 42 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 478118
        , simpleUserLogin = N "bchavez"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/478118?v=3"
        , simpleUserUrl = "https://api.github.com/users/bchavez"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/179966491"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/pull/5292#issuecomment-179966491"
  , issueCommentCreatedAt = 2016 (-02) (-04) 17 : 56 : 10 UTC
  , issueCommentBody =
      "So, after some additional review, I have a strong feeling the `ResponsePump` and `awaiters` stuff should really go into `SocketWrapper` like the .NET driver. I think there's too much state to \"remember to clear\" in `Connection` class if a connection is restarted... and it will be harder to get right as `Connection` code gets bigger in the future ... it also encourages usage of the awatiers dictionary at the Connection level, which shouldn't be accessed by anything else other than the response pump like this: https://github.com/pires/rethinkdb/pull/2\r\n\r\n if `ResponsePump` and `awatiers` get encapsulated in `SocketWrapper` generally these problems go away like in the .NET driver when a new socket is created on reconnect.... Currently, the Java `Connection` a lil bit more complicated to get right the way it is setup now....  For example: how `awaiters` is being cleared at the `Connection.close()` level ... if we move `ResponsePump` and it's `awaiters` state in `SocketWrapper` these network \"state\" troubles go away because it's logically separated from the main connection class.\r\n\r\n:heavy_check_mark: `Connection` is responsible for closing high-level `Cursors`. Then...\r\n:heavy_check_mark: `SocketWrapper:ResponsePump` is responsible for cleaning up it's own awaiters.\r\n\r\n`SocketWrapper` and it's state wont ever be used again, and can safely be GC'ed. And avoids \"forgot to clear\" state issues.\r\n\r\nLet me know what you think. If you think the name `SocketWrapper` is too low level, maybe we could rename it. Dunno."
  , issueCommentId = 179966491
  }