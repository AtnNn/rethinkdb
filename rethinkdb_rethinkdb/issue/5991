Issue
  { issueClosedAt = Just 2016 (-07) (-22) 18 : 25 : 21 UTC
  , issueUpdatedAt = 2016 (-07) (-22) 19 : 02 : 02 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/5991/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/5991"
  , issueClosedBy = Nothing
  , issueLabels = []
  , issueNumber = 5991
  , issueAssignee = Nothing
  , issueUser =
      SimpleUser
        { simpleUserId = Id 1635074
        , simpleUserLogin = N "dekimir"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/1635074?v=3"
        , simpleUserUrl = "https://api.github.com/users/dekimir"
        , simpleUserType = OwnerUser
        }
  , issueTitle = "Write-after-free during blob append"
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/5991"
  , issueCreatedAt = 2016 (-07) (-22) 18 : 14 : 04 UTC
  , issueBody =
      Just
        "When I change a few numbers in `blob_test.cc` and run `make unit`, I get the following error on MacOS:\n\n```\nrethinkdb-unittest(84138,0x700000104000) malloc: *** error for object 0x7fe14b016c08: incorrect checksum for freed object - object was probably modified after being freed.\n```\n\nHere are the changes I've made to get this error:\n\n``` diff\ndiff --git a/src/unittest/blob_test.cc b/src/unittest/blob_test.cc\nindex 8d71fae..8ee0b55 100644\n--- a/src/unittest/blob_test.cc\n+++ b/src/unittest/blob_test.cc\n@@ -24,7 +24,7 @@ public:\n     }\n\n     explicit blob_tracker_t(size_t maxreflen)\n-        : buf_(alloc_emptybuf(maxreflen), maxreflen), blob_(max_block_size_t::unsafe_make(4096),\n+        : buf_(alloc_emptybuf(maxreflen), maxreflen), blob_(max_block_size_t::unsafe_make(8192),\n                                                             buf_.data(), maxreflen) { }\n\n     void check_region(txn_t *txn, int64_t offset, int64_t size) {\n@@ -145,13 +145,14 @@ void small_value_test(cache_t *cache) {\n     cache_conn_t cache_conn(cache);\n     txn_t txn(&cache_conn, write_durability_t::SOFT, 0);\n\n-    blob_tracker_t tk(251);\n+    blob_tracker_t tk(5000);\n\n     tk.append(&txn, \"a\");\n     tk.append(&txn, \"b\");\n     tk.unappend(&txn, 1);\n     tk.unappend(&txn, 1);\n-    tk.append(&txn, std::string(250, 'd'));\n+    tk.append(&txn, std::string(6000000, 'd'));\n+    return;  // Early return to prove the error happens above.\n     for (int i = 0; i < 250; ++i) {\n         tk.unappend(&txn, 1);\n     }\n```\n\nNot sure if this violates some implicit `blob_t` rule, but I couldn't find anything in the interface description that would suggest that.  Even if the modified test is incorrect, I'd expect the code to catch the violation instead of writing into free memory.\n\nclang -v:\n\n```\nApple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn)\nTarget: x86_64-apple-darwin15.5.0\nThread model: posix\n```\n"
  , issueState = "closed"
  , issueId = Id 167101898
  , issueComments = 3
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 706854
                , simpleUserLogin = N "AtnNn"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/706854?v=3"
                , simpleUserUrl = "https://api.github.com/users/AtnNn"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Nothing
          , milestoneOpenIssues = 0
          , milestoneNumber = 19
          , milestoneClosedIssues = 175
          , milestoneDescription =
              Just
                "It's a feature. The issue describes a RethinkDB feature or design choice as if it was a bug."
          , milestoneTitle = "notabug"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/19"
          , milestoneCreatedAt = 2013 (-03) (-29) 21 : 07 : 05 UTC
          , milestoneState = "closed"
          }
  }