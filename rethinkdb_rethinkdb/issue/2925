Issue
  { issueClosedAt = Just 2014 (-08) (-19) 00 : 40 : 14 UTC
  , issueUpdatedAt = 2014 (-08) (-19) 20 : 47 : 29 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/2925/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/2925"
  , issueClosedBy = Nothing
  , issueLabels =
      [ IssueLabel
          { labelColor = "e10c02"
          , labelUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/labels/pr:high"
          , labelName = "pr:high"
          }
      , IssueLabel
          { labelColor = "e102d8"
          , labelUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/labels/tp:bug"
          , labelName = "tp:bug"
          }
      , IssueLabel
          { labelColor = "e11d21"
          , labelUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/labels/_release_holder"
          , labelName = "_release_holder"
          }
      ]
  , issueNumber = 2925
  , issueAssignee =
      Just
        SimpleUser
          { simpleUserId = Id 552910
          , simpleUserLogin = N "Tryneus"
          , simpleUserAvatarUrl =
              "https://avatars.githubusercontent.com/u/552910?v=3"
          , simpleUserUrl = "https://api.github.com/users/Tryneus"
          , simpleUserType = OwnerUser
          }
  , issueUser =
      SimpleUser
        { simpleUserId = Id 258437
        , simpleUserLogin = N "srh"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/258437?v=3"
        , simpleUserUrl = "https://api.github.com/users/srh"
        , simpleUserType = OwnerUser
        }
  , issueTitle =
      "Resumption of index post-construction should wipe out the old tree."
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/2925"
  , issueCreatedAt = 2014 (-08) (-16) 01 : 35 : 10 UTC
  , issueBody =
      Just
        "If we kill the server while post-constructing a secondary index, we restart post-construction from scratch after restarting the old server.  Right now, nobody can see where in the old code that we wipe out the old secondary index b-tree -- it looks like we just intermingle current entries with the old ones.\n\nThe old b-tree should be cleared.  It should be cleared without \"disconnecting\" the blobs that were connected, because they could be garbage block id's, and because there's no buffer relationship because this happens at startup.\n\nThis should not be hard -- at that exact spot in help_construct_bring_sindexes_up_to_date, we check for being_deleted at the same time as !post_construction_complete.  So we can just make those incomplete post-constructees be \"being_deleted\" instead, and make a new one.  And also, clear all the secondary indexes that are \"being_deleted\" at startup without bothering to disconnect their blobs.\n\nEdit: Apparently we already do support not-detaching or detaching the blobs, depending on whether the secondary index b-tree was still post-constructing when it was deleted.  That's nice.\n\nRight now (or on Monday) @tryneus is trying to make a test for this.\n"
  , issueState = "closed"
  , issueId = Id 40399991
  , issueComments = 3
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 48436
                , simpleUserLogin = N "coffeemug"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/48436?v=3"
                , simpleUserUrl = "https://api.github.com/users/coffeemug"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Nothing
          , milestoneOpenIssues = 0
          , milestoneNumber = 71
          , milestoneClosedIssues = 113
          , milestoneDescription = Just ""
          , milestoneTitle = "1.14"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/71"
          , milestoneCreatedAt = 2014 (-06) (-11) 22 : 31 : 05 UTC
          , milestoneState = "closed"
          }
  }