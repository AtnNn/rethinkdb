IssueComment
  { issueCommentUpdatedAt = 2014 (-05) (-22) 06 : 04 : 49 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 1461947
        , simpleUserLogin = N "neumino"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/1461947?v=3"
        , simpleUserUrl = "https://api.github.com/users/neumino"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/43851636"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/issues/2313#issuecomment-43851636"
  , issueCommentCreatedAt = 2014 (-05) (-22) 06 : 04 : 49 UTC
  , issueCommentBody =
      "@mlucy -- I can still reproduce it\r\n\r\n```\r\nmichel@h9:~/projects/rethinkdb-all/rethinkdb/build/release$ rm -R rethinkdb_data/; ./rethinkdb\r\ninfo: Creating directory /home/michel/projects/rethinkdb-all/rethinkdb/build/release/rethinkdb_data\r\ninfo: Creating a default database for your convenience. (This is because you ran 'rethinkdb' without 'create', 'serve', or '--join', and the directory '/home/michel/projects/rethinkdb-all/rethinkdb/build/release/rethinkdb_data' did not already exist.)\r\ninfo: Running rethinkdb 1.12.5-875-g170b6f (GCC 4.9.0)...\r\ninfo: Running on Linux 3.14.4-1-ARCH x86_64\r\ninfo: Using cache size of 3688 MB\r\ninfo: Loading data from directory /home/michel/projects/rethinkdb-all/rethinkdb/build/release/rethinkdb_data\r\ninfo: Listening for intracluster connections on port 29015\r\ninfo: Listening for client driver connections on port 28015\r\ninfo: Listening for administrative HTTP connections on port 8080\r\ninfo: Listening on addresses: 127.0.0.1, ::1\r\ninfo: To fully expose RethinkDB on the network, bind to all addresses\r\ninfo: by running rethinkdb with the `--bind all` command line option.\r\ninfo: Server ready\r\nVersion: rethinkdb 1.12.5-875-g170b6f (GCC 4.9.0)\r\nerror: Error in src/rdb_protocol/term.cc at line 330:\r\nerror: Unreachable code: \r\nerror: Backtrace:\r\nerror: Wed May 21 23:01:18 2014\r\n       \r\n       1: backtrace_t::backtrace_t() at backtrace.cc:202 (discriminator 1)\r\n       2: format_backtrace(bool) at backtrace.cc:281\r\n       3: report_fatal_error(char const*, int, char const*, ...) at errors.cc:83\r\n       4: ql::run(ql::protob_t<Query>, rdb_context_t*, signal_t*, ql::stream_cache_t*, Response*) at term.cc:330\r\n       5: rdb_query_server_t::run_query(ql::protob_t<Query> const&, Response*, client_context_t*) at counted.hpp:54\r\n       6: void query_server_t::connection_loop<json_protocol_t>(linux_tcp_conn_t*, client_context_t*) at protob.cc:314\r\n       7: query_server_t::handle_conn(scoped_ptr_t<linux_tcp_conn_descriptor_t> const&, auto_drainer_t::lock_t) at protob.cc:263\r\n       8: boost::detail::function::void_function_obj_invoker1<boost::_bi::bind_t<void, boost::_mfi::mf2<void, query_server_t, scoped_ptr_t<linux_tcp_conn_descriptor_t> const&, auto_drainer_t::lock_t>, boost::_bi::list3<boost::_bi::value<query_server_t*>, boost::arg<1>, boost::_bi::value<auto_drainer_t::lock_t> > >, void, scoped_ptr_t<linux_tcp_conn_descriptor_t>&>::invoke(boost::detail::function::function_buffer&, scoped_ptr_t<linux_tcp_conn_descriptor_t>&) at mem_fn_template.hpp:280\r\n       9: linux_nonthrowing_tcp_listener_t::handle(int) at scoped.hpp:68\r\n       10: coro_t::run() at coroutines.cc:206\r\nerror: Exiting.\r\nTrace/breakpoint trap (core dumped)\r\n```\r\n\r\nI'm using rethinkdbdash, branch `v1.13` with this diff\r\n```\r\nb/lib/connection.js\r\nindex f035db9..ef90689 100644\r\n--- a/lib/connection.js\r\n+++ b/lib/connection.js\r\n@@ -326,6 +326,7 @@ Connection.prototype._send = function(query, token, resolve, reject, originalQue\r\n     self.connection.write(tokenBuffer);\r\n \r\n     //TODO Wrap in a buffer?\r\n+    query = [103]\r\n     var data = JSON.stringify(query);\r\n \r\n     var lengthBuffer = new Buffer(4);\r\n```\r\n\r\nI'm basically sending the query `[103]` everytime.\r\n\r\n\r\nConfigure\r\n```\r\nmichel@h9:~/projects/rethinkdb-all/rethinkdb$ ./configure --allow-fetch --fetch v8 --dynamic all\r\n* Detecting system configuration\r\nBash:                           4.3.11(1)-release\r\nUse ccache:                     no\r\nC++ Compiler:                   GCC 4.9.0 (/usr/bin/c++)\r\nHost System:                    x86_64-unknown-linux-gnu\r\nBuild System:                   Linux 3.14.4-1-ARCH x86_64\r\nCross-compiling:                no\r\nHost Operating System:          Linux\r\nWithout tcmalloc:               no\r\nBuild client drivers:           no\r\nBuild Architecture:             x86_64\r\nPrecompiled web assets:         no\r\nProtobuf compiler:              /usr/bin/protoc\r\nNode.js package manager:        /usr/bin/npm\r\nLESS css:                       lessc 1.6.2\r\nCoffeeScript:                   external/coffee-script_1.7.1\r\nHandlebars:                     external/handlebars_1.3.0\r\nBrowserify:                     external/browserify_3.24.13\r\nbluebird:                       external/bluebird_1.2.1\r\nwget:                           /usr/bin/wget\r\ncurl:                           /usr/bin/curl\r\nprotobuf:                       -lprotobuf\r\nv8 javascript engine:           external/v8_3.22.24.17\r\nRE2:                            external/re2_20140111\r\nz:                              -lz\r\ncurl:                           -lcurl\r\nGoogle Test:                    external/gtest_1.6.0\r\ntermcap:                        -ltermcap\r\ntcmalloc_minimal:               -ltcmalloc_minimal\r\nTest protobuf:                  ok\r\nTest boost:                     ok\r\nInstallation prefix:            /usr/local\r\nConfiguration prefix:           /usr/local/etc\r\nRuntime data prefix:            /usr/local/var\r\n* Wrote configuration to config.mk\r\n```"
  , issueCommentId = 43851636
  }