IssueComment
  { issueCommentUpdatedAt = 2012 (-12) (-11) 01 : 49 : 55 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 552910
        , simpleUserLogin = N "Tryneus"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/552910?v=3"
        , simpleUserUrl = "https://api.github.com/users/Tryneus"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/11227757"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/issues/120#issuecomment-11227757"
  , issueCommentCreatedAt = 2012 (-12) (-11) 01 : 49 : 55 UTC
  , issueCommentBody =
      "So, in some of the tests that ran today, I found this crash, and I'm wondering if it might be a side-effect or other symptom of this same bug.  In case it matters, this was from the ql_refactor_incremental branch, but there doesn't appear to be any differences in the btree code, so it should all be the same.\r\n\r\n```\r\nVersion: rethinkdb 1.2.6-147-g373c66 (debug) (GCC 4.6.1)\r\nerror: Error in btree/leaf_node.cc at line 442:\r\nerror: Assertion failed: [fscked_successfully] timestamp cut offset below frontmost offset\r\nerror: Backtrace:\r\nerror: Mon Dec 10 16:44:09 2012\r\n       \r\n       1: lazy_backtrace_t::lazy_backtrace_t() at 0x1f114ed (../build/debug/rethinkdb)\r\n       2: format_backtrace(bool) at 0x1f10eb4 (../build/debug/rethinkdb)\r\n       3: report_fatal_error(char const*, int, char const*, ...) at 0x1e5a3e8 (../build/debug/rethinkdb)\r\n       4: leaf::validate(value_sizer_t<void>*, leaf::leaf_node_t const*) at 0x17d70b3 (../build/debug/rethinkdb)\r\n       5: leaf::insert(value_sizer_t<void>*, leaf::leaf_node_t*, btree_key_t const*, void const*, repli_timestamp_t, key_modification_proof_t) at 0x17d9c49 (../build/debug/rethinkdb)\r\n       6: leaf_insert_patch_t::apply_to_buf(char*, block_size_t) at 0x17c2c13 (../build/debug/rethinkdb)\r\n       7: mc_buf_lock_t::apply_patch(buf_patch_t*) at 0x1ef5e63 (../build/debug/rethinkdb)\r\n       8: scc_buf_lock_t<mc_cache_t>::apply_patch(buf_patch_t*) at 0x17dab56 (../build/debug/rethinkdb)\r\n       9: leaf_patched_insert(value_sizer_t<void>*, scc_buf_lock_t<mc_cache_t>*, btree_key_t const*, void const*, repli_timestamp_t, key_modification_proof_t) at 0x17da50d (../build/debug/rethinkdb)\r\n       10: void apply_keyvalue_change<memcached_value_t>(scc_transaction_t<mc_cache_t>*, keyvalue_location_t<memcached_value_t>*, btree_key_t const*, repli_timestamp_t, bool, key_modification_callback_t<memcached_value_t>*, eviction_priority_t*) at 0x1e2aa6a (../build/debug/rethinkdb)\r\n       11: run_memcached_modify_oper(memcached_modify_oper_t*, btree_slice_t*, store_key_t const&, unsigned long, unsigned int, repli_timestamp_t, scc_transaction_t<mc_cache_t>*, superblock_t*) at 0x1e2a308 (../build/debug/rethinkdb)\r\n       12: memcached_set(store_key_t const&, btree_slice_t*, intrusive_ptr_t<data_buffer_t> const&, unsigned int, unsigned int, add_policy_t, replace_policy_t, unsigned long, unsigned long, unsigned int, repli_timestamp_t, scc_transaction_t<mc_cache_t>*, superblock_t*) at 0x1e24cee (../build/debug/rethinkdb)\r\n       13: ../build/debug/rethinkdb() [0x1dff3a8]\r\n       14: ../build/debug/rethinkdb() [0x1e08d9d]\r\n       15: ../build/debug/rethinkdb() [0x1e078f1]\r\n       16: ../build/debug/rethinkdb() [0x1e067e5]\r\n       17: ../build/debug/rethinkdb() [0x1e04e47]\r\n       18: ../build/debug/rethinkdb() [0x1e0263b]\r\n       19: ../build/debug/rethinkdb() [0x1e019f7]\r\n       20: ../build/debug/rethinkdb() [0x1e00f4a]\r\n       21: ../build/debug/rethinkdb() [0x1e00a06]\r\n       22: memcached_protocol_t::store_t::protocol_write(memcached_protocol_t::write_t const&, memcached_protocol_t::write_response_t*, transition_timestamp_t, btree_slice_t*, scc_transaction_t<mc_cache_t>*, superblock_t*, signal_t*) at 0x1dff883 (../build/debug/rethinkdb)\r\n       23: btree_store_t<memcached_protocol_t>::write(metainfo_checker_t<memcached_protocol_t> const&, region_map_t<memcached_protocol_t, binary_blob_t> const&, memcached_protocol_t::write_t const&, memcached_protocol_t::write_response_t*, transition_timestamp_t, order_token_t, object_buffer_t<fifo_enforcer_sink_t::exit_write_t>*, signal_t*) at 0x17aec76 (../build/debug/rethinkdb)\r\n       24: store_subview_t<memcached_protocol_t>::write(metainfo_checker_t<memcached_protocol_t> const&, region_map_t<memcached_protocol_t, binary_blob_t> const&, memcached_protocol_t::write_t const&, memcached_protocol_t::write_response_t*, transition_timestamp_t, order_token_t, object_buffer_t<fifo_enforcer_sink_t::exit_write_t>*, signal_t*) at 0x1c6d1b3 (../build/debug/rethinkdb)\r\n       25: store_subview_t<memcached_protocol_t>::write(metainfo_checker_t<memcached_protocol_t> const&, region_map_t<memcached_protocol_t, binary_blob_t> const&, memcached_protocol_t::write_t const&, memcached_protocol_t::write_response_t*, transition_timestamp_t, order_token_t, object_buffer_t<fifo_enforcer_sink_t::exit_write_t>*, signal_t*) at 0x1c6d1b3 (../build/debug/rethinkdb)\r\n       26: listener_t<memcached_protocol_t>::perform_writeread(memcached_protocol_t::write_t const&, transition_timestamp_t, order_token_t, fifo_enforcer_write_token_t, mailbox_addr_t<void (memcached_protocol_t::write_response_t)>, auto_drainer_t::lock_t) at 0x1cf13a7 (../build/debug/rethinkdb)\r\n       27: boost::_mfi::mf6<void, listener_t<memcached_protocol_t>, memcached_protocol_t::write_t const&, transition_timestamp_t, order_token_t, fifo_enforcer_write_token_t, mailbox_addr_t<void (memcached_protocol_t::write_response_t)>, auto_drainer_t::lock_t>::operator()(listener_t<memcached_protocol_t>*, memcached_protocol_t::write_t const&, transition_timestamp_t, order_token_t, fifo_enforcer_write_token_t, mailbox_addr_t<void (memcached_protocol_t::write_response_t)>, auto_drainer_t::lock_t) const at 0x1d3a80b (../build/debug/rethinkdb)\r\n       28: void boost::_bi::list7<boost::_bi::value<listener_t<memcached_protocol_t>*>, boost::_bi::value<memcached_protocol_t::write_t>, boost::_bi::value<transition_timestamp_t>, boost::_bi::value<order_token_t>, boost::_bi::value<fifo_enforcer_write_token_t>, boost::_bi::value<mailbox_addr_t<void (memcached_protocol_t::write_response_t)> >, boost::_bi::value<auto_drainer_t::lock_t> >::operator()<boost::_mfi::mf6<void, listener_t<memcached_protocol_t>, memcached_protocol_t::write_t const&, transition_timestamp_t, order_token_t, fifo_enforcer_write_token_t, mailbox_addr_t<void (memcached_protocol_t::write_response_t)>, auto_drainer_t::lock_t>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf6<void, listener_t<memcached_protocol_t>, memcached_protocol_t::write_t const&, transition_timestamp_t, order_token_t, fifo_enforcer_write_token_t, mailbox_addr_t<void (memcached_protocol_t::write_response_t)>, auto_drainer_t::lock_t>&, boost::_bi::list0&, int) at 0x1d375e6 (../build/debug/rethinkdb)\r\n       29: boost::_bi::bind_t<void, boost::_mfi::mf6<void, listener_t<memcached_protocol_t>, memcached_protocol_t::write_t const&, transition_timestamp_t, order_token_t, fifo_enforcer_write_token_t, mailbox_addr_t<void (memcached_protocol_t::write_response_t)>, auto_drainer_t::lock_t>, boost::_bi::list7<boost::_bi::value<listener_t<memcached_protocol_t>*>, boost::_bi::value<memcached_protocol_t::write_t>, boost::_bi::value<transition_timestamp_t>, boost::_bi::value<order_token_t>, boost::_bi::value<fifo_enforcer_write_token_t>, boost::_bi::value<mailbox_addr_t<void (memcached_protocol_t::write_response_t)> >, boost::_bi::value<auto_drainer_t::lock_t> > >::operator()() at 0x1d3218f (../build/debug/rethinkdb)\r\n       30: callable_action_instance_t<boost::_bi::bind_t<void, boost::_mfi::mf6<void, listener_t<memcached_protocol_t>, memcached_protocol_t::write_t const&, transition_timestamp_t, order_token_t, fifo_enforcer_write_token_t, mailbox_addr_t<void (memcached_protocol_t::write_response_t)>, auto_drainer_t::lock_t>, boost::_bi::list7<boost::_bi::value<listener_t<memcached_protocol_t>*>, boost::_bi::value<memcached_protocol_t::write_t>, boost::_bi::value<transition_timestamp_t>, boost::_bi::value<order_token_t>, boost::_bi::value<fifo_enforcer_write_token_t>, boost::_bi::value<mailbox_addr_t<void (memcached_protocol_t::write_response_t)> >, boost::_bi::value<auto_drainer_t::lock_t> > > >::run_action() at 0x1d2b306 (../build/debug/rethinkdb)\r\n       31: callable_action_wrapper_t::run() at 0x1debc70 (../build/debug/rethinkdb)\r\n       32: coro_t::run() at 0x1de6045 (../build/debug/rethinkdb)\r\nerror: Exiting.\r\n\r\n```"
  , issueCommentId = 11227757
  }