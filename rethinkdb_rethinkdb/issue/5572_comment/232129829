IssueComment
  { issueCommentUpdatedAt = 2016 (-07) (-12) 18 : 10 : 01 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 328241
        , simpleUserLogin = N "wspeirs"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/328241?v=3"
        , simpleUserUrl = "https://api.github.com/users/wspeirs"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/232129829"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/issues/5572#issuecomment-232129829"
  , issueCommentCreatedAt = 2016 (-07) (-12) 18 : 06 : 01 UTC
  , issueCommentBody =
      "I'm seeing the same crashes because of the version checker:\r\n\r\n```\r\nwarn: Problem when checking for new versions of RethinkDB: HTTP request to update.rethinkdb.com failed.\r\nerror: Error in src/extproc/extproc_spawner.cc at line 221:\r\nerror: Guarantee failed: [res == 0]  (errno 32 - Broken pipe) could not send socket file descriptor to worker process\r\nerror: Backtrace:\r\nerror: Fri Jul  8 16:19:02 2016\r\n\r\n1 [0xabb110]: backtrace_t::backtrace_t() at ??:?\r\n2 [0xabb4a3]: format_backtrace(bool) at ??:?\r\n3 [0xd3e78d]: report_fatal_error(char const*, int, char const*, ...) at ??:?\r\n4 [0xd2e3fc]: extproc_spawner_t::spawn(object_buffer_t<socket_stream_t>*, int*) at ??:?\r\n5 [0xd34158]: extproc_worker_t::acquired(signal_t*) at ??:?\r\n6 [0xd2d453]: extproc_job_t::extproc_job_t(extproc_pool_t*, bool (*)(read_stream_t*, write_stream_t*), signal_t*) at ??:?\r\n7 [0xd32ee5]: http_runner_t::http(http_opts_t const&, http_result_t*, signal_t*) at ??:?\r\n8 [0x8bb758]: ql::dispatch_http(ql::env_t*, http_opts_t const&, http_runner_t*, http_result_t*, ql::bt_rcheckable_t const*) at ??:?\r\n9 [0xc20174]: version_checker_t::do_check(bool, auto_drainer_t::lock_t) at ??:?\r\n10 [0xc20d42]: callable_action_instance_t<std::_Bind<std::_Mem_fn<void (version_checker_t::*)(bool, auto_drainer_t::lock_t)> (version_checker_t*, bool, auto_drainer_t::lock_t)> >::run_action() at ??:?\r\n11 [0x9dab27]: coro_t::run() at ??:?\r\n\r\nerror: Exiting.\r\n```\r\n\r\nI have a LOT (570M documents) in a 3-node cluster. Each node has 256GB of memory, but memory is pretty tight: 92% of cache used.\r\n\r\nWhat is more disconcerting, is that after one of the nodes crashes, it gets stuck in a raft election loop after it is restart: \r\n\r\n```\r\nnotice: Running rethinkdb 2.3.4~0trusty (GCC 4.8.2)...\r\nnotice: Running on Linux 3.19.0-59-generic x86_64\r\nnotice: Loading data from directory /srv/rethinkdb/default\r\ninfo: Cache size is set to 225000 MB\r\nnotice: Listening for intracluster connections on port 29015\r\nnotice: Listening for client driver connections on port 28015\r\nnotice: Listening for administrative HTTP connections on port 8080\r\nnotice: Listening on cluster addresses: 127.0.0.1, 127.0.1.1, 10.40.162.15, 10.40.164.15, ::1, fe80::225:90ff:fec5:bd69%6, fe80::225:90ff:fec5:bd6b%7\r\nnotice: Listening on driver addresses: 127.0.0.1, 127.0.1.1, 10.40.162.15, 10.40.164.15, ::1, fe80::225:90ff:fec5:bd69%6, fe80::225:90ff:fec5:bd6b%7\r\nnotice: Listening on http addresses: 127.0.0.1, 127.0.1.1, 10.40.162.15, 10.40.164.15, ::1, fe80::225:90ff:fec5:bd69%6, fe80::225:90ff:fec5:bd6b%7\r\nnotice: Server ready, \"dltdb03\" cb017fe6-1d8d-48d9-9a01-9df44ca2aac4\r\ninfo: Table 509eb109-a312-47e0-aecd-d492b38dbe02: Starting a new Raft election for term 313.\r\ninfo: Table 509eb109-a312-47e0-aecd-d492b38dbe02: Raft election timed out. Starting a new election for term 314.\r\ninfo: Table 509eb109-a312-47e0-aecd-d492b38dbe02: Raft election timed out. Starting a new election for term 315.\r\ninfo: Table 509eb109-a312-47e0-aecd-d492b38dbe02: Raft election timed out. Starting a new election for term 316.\r\ninfo: Table 509eb109-a312-47e0-aecd-d492b38dbe02: Raft election timed out. Starting a new election for term 317.\r\ninfo: Table 509eb109-a312-47e0-aecd-d492b38dbe02: Raft election timed out. Starting a new election for term 318.\r\ninfo: Table 509eb109-a312-47e0-aecd-d492b38dbe02: Raft election timed out. Starting a new election for term 319.\r\ninfo: Table 509eb109-a312-47e0-aecd-d492b38dbe02: Raft election timed out. Starting a new election for term 320.\r\n```"
  , issueCommentId = 232129829
  }