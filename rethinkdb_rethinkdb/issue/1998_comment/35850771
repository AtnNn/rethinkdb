IssueComment
  { issueCommentUpdatedAt = 2014 (-02) (-24) 01 : 13 : 34 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 1461947
        , simpleUserLogin = N "neumino"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/1461947?v=3"
        , simpleUserUrl = "https://api.github.com/users/neumino"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/35850771"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/issues/1998#issuecomment-35850771"
  , issueCommentCreatedAt = 2014 (-02) (-24) 01 : 13 : 34 UTC
  , issueCommentBody =
      "Restarting the server fails with\r\n```\r\nVersion: rethinkdb 1.11.3-567-g377515 (debug) (GCC 4.8.2)\r\nerror: Error in src/serializer/log/log_serializer.cc at line 260:\r\nerror: Guarantee failed: [metablock_found] Could not find any valid metablock.\r\nerror: Backtrace:\r\nerror: Sun Feb 23 17:12:52 2014\r\n       \r\n       1: rethinkdb_backtrace(void**, int) at rethinkdb_backtrace.cc:99\r\n       2: backtrace_t::backtrace_t() at backtrace.cc:202 (discriminator 1)\r\n       3: lazy_backtrace_formatter_t::lazy_backtrace_formatter_t() at backtrace.cc:282\r\n       4: format_backtrace(bool) at backtrace.cc:197\r\n       5: report_fatal_error(char const*, int, char const*, ...) at errors.cc:76 (discriminator 1)\r\n       6: ls_start_existing_fsm_t::next_starting_up_step() at log_serializer.cc:260 (discriminator 1)\r\n       7: ls_start_existing_fsm_t::on_metablock_read() at log_serializer.cc:333\r\n       8: metablock_manager_t<log_serializer_metablock_t>::start_existing_callback(file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*) at metablock_manager.cc:229\r\n       9: boost::_mfi::mf4<void, metablock_manager_t<log_serializer_metablock_t>, file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*>::operator()(metablock_manager_t<log_serializer_metablock_t>*, file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*) const at mem_fn_template.hpp:507 (discriminator 3)\r\n       10: void boost::_bi::list5<boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>*>, boost::_bi::value<file_t*>, boost::_bi::value<bool*>, boost::_bi::value<log_serializer_metablock_t*>, boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*> >::operator()<boost::_mfi::mf4<void, metablock_manager_t<log_serializer_metablock_t>, file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf4<void, metablock_manager_t<log_serializer_metablock_t>, file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*>&, boost::_bi::list0&, int) at bind.hpp:526\r\n       11: boost::_bi::bind_t<void, boost::_mfi::mf4<void, metablock_manager_t<log_serializer_metablock_t>, file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*>, boost::_bi::list5<boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>*>, boost::_bi::value<file_t*>, boost::_bi::value<bool*>, boost::_bi::value<log_serializer_metablock_t*>, boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*> > >::operator()() at bind_template.hpp:20\r\n       12: callable_action_instance_t<boost::_bi::bind_t<void, boost::_mfi::mf4<void, metablock_manager_t<log_serializer_metablock_t>, file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*>, boost::_bi::list5<boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>*>, boost::_bi::value<file_t*>, boost::_bi::value<bool*>, boost::_bi::value<log_serializer_metablock_t*>, boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*> > > >::run_action() at callable_action.hpp:28\r\n       13: callable_action_wrapper_t::run() at runtime_utils.cc:44\r\n       14: coro_t::run() at coroutines.cc:198\r\n       15: coro_t* coro_t::spawn_later_ordered<boost::_bi::bind_t<void, boost::_mfi::mf4<void, metablock_manager_t<log_serializer_metablock_t>, file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*>, boost::_bi::list5<boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>*>, boost::_bi::value<file_t*>, boost::_bi::value<bool*>, boost::_bi::value<log_serializer_metablock_t*>, boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf4<void, metablock_manager_t<log_serializer_metablock_t>, file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*>, boost::_bi::list5<boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>*>, boost::_bi::value<file_t*>, boost::_bi::value<bool*>, boost::_bi::value<log_serializer_metablock_t*>, boost::_bi::value<metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*> > > const&) at coroutines.hpp:67\r\n       16: metablock_manager_t<log_serializer_metablock_t>::start_existing(file_t*, bool*, log_serializer_metablock_t*, metablock_manager_t<log_serializer_metablock_t>::metablock_read_callback_t*) at metablock_manager.cc:234 (discriminator 1)\r\n       17: ls_start_existing_fsm_t::next_starting_up_step() at log_serializer.cc:248 (discriminator 1)\r\n       18: ls_start_existing_fsm_t::on_static_header_read() at log_serializer.cc:325\r\n       19: co_static_header_read(file_t*, static_header_read_callback_t*, void*, unsigned long) at static_header.cc:76\r\n       20: void boost::_bi::list4<boost::_bi::value<file_t*>, boost::_bi::value<static_header_read_callback_t*>, boost::_bi::value<void*>, boost::_bi::value<unsigned long> >::operator()<void (*)(file_t*, static_header_read_callback_t*, void*, unsigned long), boost::_bi::list0>(boost::_bi::type<void>, void (*&)(file_t*, static_header_read_callback_t*, void*, unsigned long), boost::_bi::list0&, int) at bind.hpp:458\r\n       21: boost::_bi::bind_t<void, void (*)(file_t*, static_header_read_callback_t*, void*, unsigned long), boost::_bi::list4<boost::_bi::value<file_t*>, boost::_bi::value<static_header_read_callback_t*>, boost::_bi::value<void*>, boost::_bi::value<unsigned long> > >::operator()() at bind_template.hpp:20\r\n       22: callable_action_instance_t<boost::_bi::bind_t<void, void (*)(file_t*, static_header_read_callback_t*, void*, unsigned long), boost::_bi::list4<boost::_bi::value<file_t*>, boost::_bi::value<static_header_read_callback_t*>, boost::_bi::value<void*>, boost::_bi::value<unsigned long> > > >::run_action() at callable_action.hpp:28\r\n       23: callable_action_wrapper_t::run() at runtime_utils.cc:44\r\n       24: coro_t::run() at coroutines.cc:198\r\n       25: coro_t* coro_t::spawn_later_ordered<boost::_bi::bind_t<void, void (*)(file_t*, static_header_read_callback_t*, void*, unsigned long), boost::_bi::list4<boost::_bi::value<file_t*>, boost::_bi::value<static_header_read_callback_t*>, boost::_bi::value<void*>, boost::_bi::value<unsigned long> > > >(boost::_bi::bind_t<void, void (*)(file_t*, static_header_read_callback_t*, void*, unsigned long), boost::_bi::list4<boost::_bi::value<file_t*>, boost::_bi::value<static_header_read_callback_t*>, boost::_bi::value<void*>, boost::_bi::value<unsigned long> > > const&) at coroutines.hpp:67\r\n       26: static_header_read(file_t*, void*, unsigned long, static_header_read_callback_t*) at static_header.cc:81 (discriminator 1)\r\n       27: ls_start_existing_fsm_t::next_starting_up_step() at log_serializer.cc:214\r\n       28: ls_start_existing_fsm_t::run(cond_t*, serializer_file_opener_t*) at log_serializer.cc:202\r\n       29: log_serializer_t::log_serializer_t(log_serializer_dynamic_config_t, serializer_file_opener_t*, perfmon_collection_t*) at log_serializer.cc:395\r\n       30: metadata_persistence::persistent_file_t<cluster_semilattice_metadata_t>::construct_serializer_and_cache(bool, serializer_file_opener_t*, perfmon_collection_t*) at persist.cc:114 (discriminator 2)\r\n       31: metadata_persistence::persistent_file_t<cluster_semilattice_metadata_t>::persistent_file_t(io_backender_t*, serializer_filepath_t const&, perfmon_collection_t*, bool) at persist.cc:83\r\n       32: metadata_persistence::cluster_persistent_file_t::cluster_persistent_file_t(io_backender_t*, serializer_filepath_t const&, perfmon_collection_t*) at persist.cc:201\r\n       33: run_rethinkdb_serve(base_path_t const&, serve_info_t const&, file_direct_io_mode_t, int, uuid_u const*, cluster_semilattice_metadata_t const*, directory_lock_t*, bool*) at command_line.cc:749 (discriminator 1)\r\n       34: run_rethinkdb_porcelain(base_path_t const&, name_string_t const&, file_direct_io_mode_t, int, bool, serve_info_t const&, directory_lock_t*, bool*) at command_line.cc:791\r\n       35: void std::_Bind<void (*(base_path_t, name_string_t, file_direct_io_mode_t, int, bool, serve_info_t, directory_lock_t*, bool*))(base_path_t const&, name_string_t const&, file_direct_io_mode_t, int, bool, serve_info_t const&, directory_lock_t*, bool*)>::__call<void, , 0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul, 7ul>(std::tuple<>&&, std::_Index_tuple<0ul, 1ul, 2ul, 3ul, 4ul, 5ul, 6ul, 7ul>) at functional:1296\r\n       36: void std::_Bind<void (*(base_path_t, name_string_t, file_direct_io_mode_t, int, bool, serve_info_t, directory_lock_t*, bool*))(base_path_t const&, name_string_t const&, file_direct_io_mode_t, int, bool, serve_info_t const&, directory_lock_t*, bool*)>::operator()<, void>() at functional:1355\r\n       37: std::_Function_handler<void (), std::_Bind<void (*(base_path_t, name_string_t, file_direct_io_mode_t, int, bool, serve_info_t, directory_lock_t*, bool*))(base_path_t const&, name_string_t const&, file_direct_io_mode_t, int, bool, serve_info_t const&, directory_lock_t*, bool*)> >::_M_invoke(std::_Any_data const&) at functional:2073\r\n       38: std::function<void ()>::operator()() const at functional:2465\r\n       39: starter_t::run_wrapper(std::function<void ()> const&) at runtime.cc:59\r\n       40: void std::_Mem_fn<void (starter_t::*)(std::function<void ()> const&)>::operator()<std::function<void ()>&, void>(starter_t*, std::function<void ()>&) const at functional:601 (discriminator 3)\r\n       41: void std::_Bind<std::_Mem_fn<void (starter_t::*)(std::function<void ()> const&)> (starter_t*, std::function<void ()>)>::__call<void, , 0ul, 1ul>(std::tuple<>&&, std::_Index_tuple<0ul, 1ul>) at functional:1296\r\n       42: void std::_Bind<std::_Mem_fn<void (starter_t::*)(std::function<void ()> const&)> (starter_t*, std::function<void ()>)>::operator()<, void>() at functional:1355\r\n       43: std::_Function_handler<void (), std::_Bind<std::_Mem_fn<void (starter_t::*)(std::function<void ()> const&)> (starter_t*, std::function<void ()>)> >::_M_invoke(std::_Any_data const&) at functional:2073\r\n       44: std::function<void ()>::operator()() const at functional:2465\r\n       45: callable_action_instance_t<std::function<void ()> >::run_action() at callable_action.hpp:28\r\n       46: callable_action_wrapper_t::run() at runtime_utils.cc:44\r\n       47: coro_t::run() at coroutines.cc:198\r\n       48: coro_t* coro_t::spawn_sometime<std::function<void ()> >(std::function<void ()> const&) at coroutines.hpp:57\r\n       49: starter_t::on_thread_switch() at runtime.cc:55\r\n       50: linux_message_hub_t::on_event(int) at message_hub.cc:153\r\n       51: epoll_event_queue_t::run() at epoll.cc:101\r\n       52: linux_thread_pool_t::start_thread(void*) at thread_pool.cc:159\r\n       53: /usr/lib/libpthread.so.0(+0x80a2) [0x7f48ac4070a2] at 0x7f48ac4070a2 (/usr/lib/libpthread.so.0)\r\n       54: clone+0x6d at 0x7f48ac13cd1d (/usr/lib/libc.so.6)\r\nerror: Exiting.\r\n```"
  , issueCommentId = 35850771
  }