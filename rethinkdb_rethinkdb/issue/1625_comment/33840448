IssueComment
  { issueCommentUpdatedAt = 2014 (-01) (-31) 20 : 42 : 42 UTC
  , issueCommentUser =
      SimpleUser
        { simpleUserId = Id 1461947
        , simpleUserLogin = N "neumino"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/1461947?v=3"
        , simpleUserUrl = "https://api.github.com/users/neumino"
        , simpleUserType = OwnerUser
        }
  , issueCommentUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/comments/33840448"
  , issueCommentHtmlUrl =
      "https://github.com/rethinkdb/rethinkdb/pull/1625#issuecomment-33840448"
  , issueCommentCreatedAt = 2014 (-01) (-31) 20 : 42 : 42 UTC
  , issueCommentBody =
      "While waiting for some performance tests, I tried a few things for this pull request.\r\n\r\nI'm using https://github.com/neumino/rethinkdb/tree/michel_arm\r\nI don't have a bad instruction anymore (maybe I just misread it before).\r\n\r\nI still get a crash with `--bind all` with \r\n```\r\nerror: Guarantee failed: [res == 0]  (errno 9 - Bad file descriptor) Could not watch resource\r\n```\r\nIncreasing the number of file descriptors didin't help\r\n\r\n\r\nFull error:\r\n```\r\n[michel@pi debug]$ ./rethinkdb --bind all\r\ninfo: Running rethinkdb 1.11.2-135-g52ddd7 (debug) (GCC 4.7.2)...\r\ninfo: Running on Linux 3.10.19-3-ARCH armv6l\r\ninfo: Loading data from directory /home/michel/michel/rethinkdb-neumino/build/debug/rethinkdb_data\r\ninfo: Our machine ID is 3c20bd3f-7af5-466b-8571-c657834ac6b5\r\nVersion: rethinkdb 1.11.2-135-g52ddd7 (debug) (GCC 4.7.2)\r\nerror: Error in src/arch/runtime/event_queue/epoll.cc at line 138:\r\nerror: Guarantee failed: [res == 0]  (errno 9 - Bad file descriptor) Could not watch resource\r\nerror: Backtrace:\r\nerror: Fri Jan 31 13:38:43 2014\r\n       \r\n       1: rethinkdb_backtrace(void**, int) at 0x24f7208 (./rethinkdb)\r\n       2: backtrace_t::backtrace_t() at 0x1e95f20 (./rethinkdb)\r\n       3: lazy_backtrace_formatter_t::lazy_backtrace_formatter_t() at 0x1e9666c (./rethinkdb)\r\n       4: format_backtrace(bool) at 0x1e95e60 (./rethinkdb)\r\n       5: report_fatal_error(char const*, int, char const*, ...) at 0x2503370 (./rethinkdb)\r\n       6: epoll_event_queue_t::watch_resource(int, int, linux_event_callback_t*) at 0x1e30e54 (./rethinkdb)\r\n       7: linux_event_watcher_t::remask() at 0x1e4e98c (./rethinkdb)\r\n       8: linux_event_watcher_t::linux_event_watcher_t(int, linux_event_callback_t*) at 0x1e4e388 (./rethinkdb)\r\n       9: linux_nonthrowing_tcp_listener_t::init_sockets() at 0x1e56038 (./rethinkdb)\r\n       10: linux_nonthrowing_tcp_listener_t::bind_sockets_internal(int*) at 0x1e56870 (./rethinkdb)\r\n       11: linux_nonthrowing_tcp_listener_t::bind_sockets() at 0x1e563a4 (./rethinkdb)\r\n       12: linux_tcp_bound_socket_t::linux_tcp_bound_socket_t(std::set<ip_address_t, std::less<ip_address_t>, std::allocator<ip_address_t> > const&, int) at 0x1e5723c (./rethinkdb)\r\n       13: connectivity_cluster_t::run_t::run_t(connectivity_cluster_t*, std::set<ip_address_t, std::less<ip_address_t>, std::allocator<ip_address_t> > const&, peer_address_t const&, int, message_handler_t*, int, heartbeat_manager_t*) at 0x1ae75ec (./rethinkdb)\r\n       14: do_serve(io_backender_t*, bool, base_path_t const&, metadata_persistence::cluster_persistent_file_t*, metadata_persistence::auth_persistent_file_t*, peer_address_set_t const&, service_address_ports_t, std::string, os_signal_cond_t*, boost::optional<std::string> const&) at 0x21081a0 (./rethinkdb)\r\n       15: serve(io_backender_t*, base_path_t const&, metadata_persistence::cluster_persistent_file_t*, metadata_persistence::auth_persistent_file_t*, peer_address_set_t const&, service_address_ports_t, std::string, os_signal_cond_t*, boost::optional<std::string> const&) at 0x210c198 (./rethinkdb)\r\n       16: run_rethinkdb_serve(base_path_t const&, serve_info_t const&, file_direct_io_mode_t, int, uuid_u const*, cluster_semilattice_metadata_t const*, directory_lock_t*, bool*) at 0x2131888 (./rethinkdb)\r\n       17: run_rethinkdb_porcelain(base_path_t const&, name_string_t const&, file_direct_io_mode_t, int, bool, serve_info_t const&, directory_lock_t*, bool*) at 0x2131c64 (./rethinkdb)\r\n       18: void std::_Bind<void (*(base_path_t, name_string_t, file_direct_io_mode_t, int, bool, serve_info_t, directory_lock_t*, bool*))(base_path_t const&, name_string_t const&, file_direct_io_mode_t, int, bool, serve_info_t const&, directory_lock_t*, bool*)>::__call<void, , 0u, 1u, 2u, 3u, 4u, 5u, 6u, 7u>(std::tuple<>&&, std::_Index_tuple<0u, 1u, 2u, 3u, 4u, 5u, 6u, 7u>) at 0x214821c (./rethinkdb)\r\n       19: void std::_Bind<void (*(base_path_t, name_string_t, file_direct_io_mode_t, int, bool, serve_info_t, directory_lock_t*, bool*))(base_path_t const&, name_string_t const&, file_direct_io_mode_t, int, bool, serve_info_t const&, directory_lock_t*, bool*)>::operator()<, void>() at 0x214620c (./rethinkdb)\r\n       20: boost::detail::function::void_function_obj_invoker0<std::_Bind<void (*(base_path_t, name_string_t, file_direct_io_mode_t, int, bool, serve_info_t, directory_lock_t*, bool*))(base_path_t const&, name_string_t const&, file_direct_io_mode_t, int, bool, serve_info_t const&, directory_lock_t*, bool*)>, void>::invoke(boost::detail::function::function_buffer&) at 0x21451a8 (./rethinkdb)\r\n       21: boost::function0<void>::operator()() const at 0x1a392c0 (./rethinkdb)\r\n       22: starter_t::run_wrapper(boost::function<void ()> const&) at 0x1e34bf4 (./rethinkdb)\r\n       23: boost::_mfi::mf1<void, starter_t, boost::function<void ()> const&>::operator()(starter_t*, boost::function<void ()> const&) const at 0x1e35938 (./rethinkdb)\r\n       24: void boost::_bi::list2<boost::_bi::value<starter_t*>, boost::_bi::value<boost::function<void ()> > >::operator()<boost::_mfi::mf1<void, starter_t, boost::function<void ()> const&>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf1<void, starter_t, boost::function<void ()> const&>&, boost::_bi::list0&, int) at 0x1e3578c (./rethinkdb)\r\n       25: boost::_bi::bind_t<void, boost::_mfi::mf1<void, starter_t, boost::function<void ()> const&>, boost::_bi::list2<boost::_bi::value<starter_t*>, boost::_bi::value<boost::function<void ()> > > >::operator()() at 0x1e354dc (./rethinkdb)\r\n       26: boost::detail::function::void_function_obj_invoker0<boost::_bi::bind_t<void, boost::_mfi::mf1<void, starter_t, boost::function<void ()> const&>, boost::_bi::list2<boost::_bi::value<starter_t*>, boost::_bi::value<boost::function<void ()> > > >, void>::invoke(boost::detail::function::function_buffer&) at 0x1e35374 (./rethinkdb)\r\n       27: boost::function0<void>::operator()() const at 0x1a392c0 (./rethinkdb)\r\n       28: callable_action_instance_t<boost::function<void ()> >::run_action() at 0x1e35b7c (./rethinkdb)\r\n       29: callable_action_wrapper_t::run() at 0x1e3efa8 (./rethinkdb)\r\n       30: coro_t::run() at 0x1e37abc (./rethinkdb)\r\n       31: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       32: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       33: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       34: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       35: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       36: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       37: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       38: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       39: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       40: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       41: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       42: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       43: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       44: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       45: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       46: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       47: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       48: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       49: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       50: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       51: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       52: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       53: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       54: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       55: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       56: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       57: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       58: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       59: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       60: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       61: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       62: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       63: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       64: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       65: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       66: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       67: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       68: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       69: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       70: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       71: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       72: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       73: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       74: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       75: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       76: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       77: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       78: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       79: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       80: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       81: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       82: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       83: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       84: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       85: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       86: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       87: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       88: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       89: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       90: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       91: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       92: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       93: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       94: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       95: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       96: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       97: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       98: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       99: coro_t::run() at 0x1e3782c (./rethinkdb)\r\n       100: coro_t::run() at 0x1e3782c (./rethinkdb)\r\nerror: Exiting.\r\nVersion: rethinkdb 1.11.2-135-g52ddd7 (debug) (GCC 4.7.2)\r\nCrashing while already crashed. Printing error message to stderr.\r\nGuarantee failed: [sock_fd != fd_t(-1)]  (errno 22 - Invalid argument) Couldn't create socketVersion: rethinkdb 1.11.2-135-g52ddd7 (debug) (GCC 4.7.2)\r\nCrashing while already crashed. Printing error message to stderr.\r\nGuarantee failed: [res != -1]  (errno 9 - Bad file descriptor) Could not set REUSEADDR optionVersion: rethinkdb 1.11.2-135-g52ddd7 (debug) (GCC 4.7.2)\r\nCrashing while already crashed. Printing error message to stderr.\r\nGuarantee failed: [res != -1]  (errno 9 - Bad file descriptor) Could not set TCP_NODELAY optionVersion: rethinkdb 1.11.2-135-g52ddd7 (debug) (GCC 4.7.2)\r\nCrashing while already crashed. Printing error message to stderr.\r\nCould not bind socket at localhost:29015 - Bad file descriptor\r\nAborted (core dumped)\r\n```\r\n\r\n\r\nI'll merge next in my branch and see what happen.\r\nAnd build in release mode.\r\n"
  , issueCommentId = 33840448
  }