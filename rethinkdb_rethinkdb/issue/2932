Issue
  { issueClosedAt = Just 2014 (-09) (-04) 20 : 33 : 53 UTC
  , issueUpdatedAt = 2015 (-01) (-02) 21 : 16 : 43 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/2932/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/2932"
  , issueClosedBy = Nothing
  , issueLabels =
      [ IssueLabel
          { labelColor = "0052cc"
          , labelUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/labels/tp:ReQL_proposal"
          , labelName = "tp:ReQL_proposal"
          }
      ]
  , issueNumber = 2932
  , issueAssignee = Nothing
  , issueUser =
      SimpleUser
        { simpleUserId = Id 316661
        , simpleUserLogin = N "timmaxw"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/316661?v=3"
        , simpleUserUrl = "https://api.github.com/users/timmaxw"
        , simpleUserType = OwnerUser
        }
  , issueTitle = "New conceptual framework for replication goals"
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/2932"
  , issueCreatedAt = 2014 (-08) (-18) 23 : 07 : 58 UTC
  , issueBody =
      Just
        "As part of the ReQL admin API changes, we're planning to change the conceptual framework for specifying replication goals. The reason for making this change now is that once we release an API for accessing the replication goals, it will be much harder to change things, because users will start to write code that depends on the concepts.\n\nThe new proposal is as follows:\n- We no longer persist high-level settings such as the number of replicas the user wants in each datacenter, the primary datacenter, etc. Instead, we store a list of which servers are masters and replicas for which shards. This is called the table's \"config\".\n- We allow the user to read and write each table's config directly. For example, the user can directly say that they want two shards, and they want machines `a` and `b` to be masters, and machines `c` and `d` to be replicas. (Issues #2853 and #2906 are about the details of how the user reads and writes the config.)\n- We introduce a new API call `table.reconfigure()`. As parameters, it takes high-level parameters such as the number of replicas in each datacenter. It picks a set of servers for each shard based on the user's parameters and the state of the cluster, and then sets the table's config to that. (See #2857 for more discussion of this command.)\n- The servers are stored and presented by their names. For example, suppose that the user has two servers, `zeus` and `thor`. The config says that the data should be stored on `zeus`, so it is. Now the user renames `zeus` to `ra` and `thor` to `zeus`. The system will automatically backfill the data from the old `zeus` to the new `zeus`.\n- The exact locations of the shards' split points are persisted in the semilattices but not presented to the user. They are automatically recomputed whenever the user changes the number of shards in the config, or when the user manually calls a `rebalance()` command. (See #2895.)\n\n@coffeemug and I have been talking about this plan for a while, but we want feedback from the rest of the team. This issue is the place to propose and discuss major changes to the above concepts.\n\nA prototype already exists in the `reql_admin` branch. This includes an implementation of the config, but currently the user has to specify split points manually. An implementation of `reconfigure()` is currently in progress.\n"
  , issueState = "closed"
  , issueId = Id 40542200
  , issueComments = 8
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 48436
                , simpleUserLogin = N "coffeemug"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/48436?v=3"
                , simpleUserUrl = "https://api.github.com/users/coffeemug"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Just 2015 (-01) (-23) 08 : 00 : 00 UTC
          , milestoneOpenIssues = 0
          , milestoneNumber = 81
          , milestoneClosedIssues = 321
          , milestoneDescription = Just ""
          , milestoneTitle = "1.16"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/81"
          , milestoneCreatedAt = 2014 (-09) (-04) 04 : 49 : 30 UTC
          , milestoneState = "closed"
          }
  }