Issue
  { issueClosedAt = Just 2014 (-07) (-22) 00 : 15 : 08 UTC
  , issueUpdatedAt = 2014 (-07) (-22) 00 : 20 : 39 UTC
  , issueEventsUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/2730/events"
  , issueHtmlUrl =
      Just "https://github.com/rethinkdb/rethinkdb/issues/2730"
  , issueClosedBy = Nothing
  , issueLabels = []
  , issueNumber = 2730
  , issueAssignee = Nothing
  , issueUser =
      SimpleUser
        { simpleUserId = Id 7431361
        , simpleUserLogin = N "larkost"
        , simpleUserAvatarUrl =
            "https://avatars.githubusercontent.com/u/7431361?v=3"
        , simpleUserUrl = "https://api.github.com/users/larkost"
        , simpleUserType = OwnerUser
        }
  , issueTitle = "server crashing with assert on MacOS on next"
  , issuePullRequest = Nothing
  , issueUrl =
      "https://api.github.com/repos/rethinkdb/rethinkdb/issues/2730"
  , issueCreatedAt = 2014 (-07) (-22) 00 : 13 : 09 UTC
  , issueBody =
      Just
        "When running any of the following 3 tests on MacOS (but not on newton) the server instance is crashing somewhere inside the test:\r\n- connections/connection.js\r\n- polyglot/aggregation.py\r\n- polyglot/aggregation.rb\r\nI am testing a DEBUG build, and have not checked if there is a failure in release. All of them have the fowling lines/backtrace:\r\n```\r\nerror: Error in src/rdb_protocol/shards.cc at line 616:\r\nerror: Guarantee failed: [(funcs.size() + append_index) != 0] \r\nerror: Backtrace:\r\nerror: Mon Jul 21 17:02:35 2014\r\n       \r\n       1: 0   rethinkdb                           0x00000001107e4c30 _Z19rethinkdb_backtracePPvi + 272 at 0x1107e4c30 ()\r\n       2: 0   rethinkdb                           0x000000010fafddc0 _ZN11backtrace_tC2Ev + 304 at 0x10fafddc0 ()\r\n       3: 0   rethinkdb                           0x000000010faffcbb _ZN26lazy_backtrace_formatter_tC2Ev + 43 at 0x10faffcbb ()\r\n       4: 0   rethinkdb                           0x000000010fafcc05 _ZN26lazy_backtrace_formatter_tC1Ev + 21 at 0x10fafcc05 ()\r\n       5: 0   rethinkdb                           0x000000010fafcb70 _Z16format_backtraceb + 48 at 0x10fafcb70 ()\r\n       6: 0   rethinkdb                           0x00000001103d5355 _Z18report_fatal_errorPKciS0_z + 757 at 0x1103d5355 ()\r\n       7: 0   rethinkdb                           0x00000001106ab7ec _ZN2ql13group_trans_tC2ERKNS_17group_wire_func_tE + 284 at 0x1106ab7ec ()\r\n       8: 0   rethinkdb                           0x00000001106ab6bd _ZN2ql13group_trans_tC1ERKNS_17group_wire_func_tE + 29 at 0x1106ab6bd ()\r\n       9: 0   rethinkdb                           0x00000001106ab669 _ZNK2ql19transform_visitor_tclERKNS_17group_wire_func_tE + 57 at 0x1106ab669 ()\r\n       10: 0   rethinkdb                           0x00000001106ab5e3 _ZN5boost6detail7variant14invoke_visitorIKN2ql19transform_visitor_tEE14internal_visitIKNS3_17group_wire_func_tEEEPNS3_4op_tERT_i + 35 at 0x1106ab5e3 ()\r\n       11: 0   rethinkdb                           0x00000001106ab579 _ZN5boost6detail7variant27visitation_impl_invoke_implINS1_14invoke_visitorIKN2ql19transform_visitor_tEEEPKvNS4_17group_wire_func_tEEENT_11result_typeEiRSB_T0_PT1_N4mpl_5bool_ILb0EEE + 73 at 0x1106ab579 ()\r\n       12: 0   rethinkdb                           0x00000001106a7a5f _ZN5boost6detail7variant22visitation_impl_invokeINS1_14invoke_visitorIKN2ql19transform_visitor_tEEEPKvNS4_17group_wire_func_tENS_7variantINS4_15map_wire_func_tESA_NS4_18filter_wire_func_tENS4_21concatmap_wire_func_tENS4_20distinct_wire_func_tENS1_5void_ESG_SG_SG_SG_SG_SG_SG_SG_SG_SG_SG_SG_SG_SG_E18has_fallback_type_EEENT_11result_typeEiRSJ_T0_PT1_T2_i + 47 at 0x1106a7a5f ()\r\n       13: 0   rethinkdb                           0x00000001106a7631 _ZN5boost6detail7variant15visitation_implIN4mpl_4int_ILi0EEENS1_20visitation_impl_stepINS_3mpl6l_iterINS7_6l_itemINS3_5long_ILl5EEEN2ql15map_wire_func_tENS9_INSA_ILl4EEENSC_17group_wire_func_tENS9_INSA_ILl3EEENSC_18filter_wire_func_tENS9_INSA_ILl2EEENSC_21concatmap_wire_func_tENS9_INSA_ILl1EEENSC_20distinct_wire_func_tENS7_5l_endEEEEEEEEEEEEENS8_ISM_EEEENS1_14invoke_visitorIKNSC_19transform_visitor_tEEEPKvNS_7variantISD_SF_SH_SJ_SL_NS1_5void_ES12_S12_S12_S12_S12_S12_S12_S12_S12_S12_S12_S12_S12_S12_E18has_fallback_type_EEENT1_11result_typeEiiRS15_T2_NS3_5bool_ILb0EEET3_PT_PT0_ + 161 at 0x1106a7631 ()\r\n       14: 0   rethinkdb                           0x00000001106a7589 _ZN5boost7variantIN2ql15map_wire_func_tENS1_17group_wire_func_tENS1_18filter_wire_func_tENS1_21concatmap_wire_func_tENS1_20distinct_wire_func_tENS_6detail7variant5void_ES9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_E27internal_apply_visitor_implINS8_14invoke_visitorIKNS1_19transform_visitor_tEEEPKvEENT_11result_typeEiiRSI_T0_ + 57 at 0x1106a7589 ()\r\n       15: 0   rethinkdb                           0x00000001106a7545 _ZNK5boost7variantIN2ql15map_wire_func_tENS1_17group_wire_func_tENS1_18filter_wire_func_tENS1_21concatmap_wire_func_tENS1_20distinct_wire_func_tENS_6detail7variant5void_ES9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_E22internal_apply_visitorINS8_14invoke_visitorIKNS1_19transform_visitor_tEEEEENT_11result_typeERSG_ + 85 at 0x1106a7545 ()\r\n       16: 0   rethinkdb                           0x00000001106a74b5 _ZNK5boost7variantIN2ql15map_wire_func_tENS1_17group_wire_func_tENS1_18filter_wire_func_tENS1_21concatmap_wire_func_tENS1_20distinct_wire_func_tENS_6detail7variant5void_ES9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_E13apply_visitorIKNS1_19transform_visitor_tEEENT_11result_typeERSE_ + 53 at 0x1106a74b5 ()\r\n       17: 0   rethinkdb                           0x00000001106a73ed _ZN5boost13apply_visitorIN2ql19transform_visitor_tEKNS_7variantINS1_15map_wire_func_tENS1_17group_wire_func_tENS1_18filter_wire_func_tENS1_21concatmap_wire_func_tENS1_20distinct_wire_func_tENS_6detail7variant5void_ESB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_EEEENT_11result_typeERKSE_RT0_ + 29 at 0x1106a73ed ()\r\n       18: 0   rethinkdb                           0x00000001106a6d24 _ZN2ql7make_opERKN5boost7variantINS_15map_wire_func_tENS_17group_wire_func_tENS_18filter_wire_func_tENS_21concatmap_wire_func_tENS_20distinct_wire_func_tENS0_6detail7variant5void_ES9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_S9_EE + 52 at 0x1106a6d24 ()\r\n       19: 0   rethinkdb                           0x000000011049ad0c _ZN10job_data_tC2EPN2ql5env_tERKNS0_11batchspec_tERKNSt3__16vectorIN5boost7variantINS0_15map_wire_func_tENS0_17group_wire_func_tENS0_18filter_wire_func_tENS0_21concatmap_wire_func_tENS0_20distinct_wire_func_tENS8_6detail7variant5void_ESH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_EENS6_9allocatorISI_EEEERKNS8_8optionalINS9_INS0_17count_wire_func_tENS0_15sum_wire_func_tENS0_15avg_wire_func_tENS0_15min_wire_func_tENS0_15max_wire_func_tENS0_18reduce_wire_func_tESH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_EEEE9sorting_t + 668 at 0x11049ad0c ()\r\n       20: 0   rethinkdb                           0x000000011048986d _ZN10job_data_tC1EPN2ql5env_tERKNS0_11batchspec_tERKNSt3__16vectorIN5boost7variantINS0_15map_wire_func_tENS0_17group_wire_func_tENS0_18filter_wire_func_tENS0_21concatmap_wire_func_tENS0_20distinct_wire_func_tENS8_6detail7variant5void_ESH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_EENS6_9allocatorISI_EEEERKNS8_8optionalINS9_INS0_17count_wire_func_tENS0_15sum_wire_func_tENS0_15avg_wire_func_tENS0_15min_wire_func_tENS0_15max_wire_func_tENS0_18reduce_wire_func_tESH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_SH_EEEE9sorting_t + 61 at 0x11048986d ()\r\n       21: 0   rethinkdb                           0x0000000110484315 _Z14rdb_rget_sliceP13btree_slice_tRK11key_range_tP12superblock_tPN2ql5env_tERKNS6_11batchspec_tERKNSt3__16vectorIN5boost7variantINS6_15map_wire_func_tENS6_17group_wire_func_tENS6_18filter_wire_func_tENS6_21concatmap_wire_func_tENS6_20distinct_wire_func_tENSE_6detail7variant5void_ESN_SN_SN_SN_SN_SN_SN_SN_SN_SN_SN_SN_SN_SN_EENSC_9allocatorISO_EEEERKNSE_8optionalINSF_INS6_17count_wire_func_tENS6_15sum_wire_func_tENS6_15avg_wire_func_tENS6_15min_wire_func_tENS6_15max_wire_func_tENS6_18reduce_wire_func_tESN_SN_SN_SN_SN_SN_SN_SN_SN_SN_SN_SN_SN_SN_EEEE9sorting_tP20rget_read_response_t + 405 at 0x110484315 ()\r\n       22: 0   rethinkdb                           0x0000000110705cd6 _ZN18rdb_read_visitor_tclERK11rget_read_t + 678 at 0x110705cd6 ()\r\n       23: 0   rethinkdb                           0x00000001107059e3 _ZN5boost6detail7variant14invoke_visitorI18rdb_read_visitor_tE14internal_visitIK11rget_read_tEEvRT_i + 35 at 0x1107059e3 ()\r\n       24: 0   rethinkdb                           0x0000000110705989 _ZN5boost6detail7variant27visitation_impl_invoke_implINS1_14invoke_visitorI18rdb_read_visitor_tEEPKv11rget_read_tEENT_11result_typeEiRS9_T0_PT1_N4mpl_5bool_ILb0EEE + 73 at 0x110705989 ()\r\n       25: 0   rethinkdb                           0x00000001106fd80f _ZN5boost6detail7variant22visitation_impl_invokeINS1_14invoke_visitorI18rdb_read_visitor_tEEPKv11rget_read_tNS_7variantI12point_read_tS8_22changefeed_subscribe_t18changefeed_stamp_t19distribution_read_t13sindex_list_t15sindex_status_tNS1_5void_ESG_SG_SG_SG_SG_SG_SG_SG_SG_SG_SG_SG_E18has_fallback_type_EEENT_11result_typeEiRSJ_T0_PT1_T2_i + 47 at 0x1106fd80f ()\r\n       26: 0   rethinkdb                           0x00000001106fd43d _ZN5boost6detail7variant15visitation_implIN4mpl_4int_ILi0EEENS1_20visitation_impl_stepINS_3mpl6l_iterINS7_6l_itemINS3_5long_ILl7EEE12point_read_tNS9_INSA_ILl6EEE11rget_read_tNS9_INSA_ILl5EEE22changefeed_subscribe_tNS9_INSA_ILl4EEE18changefeed_stamp_tNS9_INSA_ILl3EEE19distribution_read_tNS9_INSA_ILl2EEE13sindex_list_tNS9_INSA_ILl1EEE15sindex_status_tNS7_5l_endEEEEEEEEEEEEEEEEENS8_ISP_EEEENS1_14invoke_visitorI18rdb_read_visitor_tEEPKvNS_7variantISC_SE_SG_SI_SK_SM_SO_NS1_5void_ES16_S16_S16_S16_S16_S16_S16_S16_S16_S16_S16_S16_E18has_fallback_type_EEENT1_11result_typeEiiRS19_T2_NS3_5bool_ILb0EEET3_PT_PT0_ + 157 at 0x1106fd43d ()\r\n       27: 0   rethinkdb                           0x00000001106fd399 _ZN5boost7variantI12point_read_t11rget_read_t22changefeed_subscribe_t18changefeed_stamp_t19distribution_read_t13sindex_list_t15sindex_status_tNS_6detail7variant5void_ESA_SA_SA_SA_SA_SA_SA_SA_SA_SA_SA_SA_E27internal_apply_visitor_implINS9_14invoke_visitorI18rdb_read_visitor_tEEPKvEENT_11result_typeEiiRSI_T0_ + 57 at 0x1106fd399 ()\r\n       28: 0   rethinkdb                           0x00000001106fd355 _ZNK5boost7variantI12point_read_t11rget_read_t22changefeed_subscribe_t18changefeed_stamp_t19distribution_read_t13sindex_list_t15sindex_status_tNS_6detail7variant5void_ESA_SA_SA_SA_SA_SA_SA_SA_SA_SA_SA_SA_E22internal_apply_visitorINS9_14invoke_visitorI18rdb_read_visitor_tEEEENT_11result_typeERSG_ + 85 at 0x1106fd355 ()\r\n       29: 0   rethinkdb                           0x00000001106fd2c5 _ZNK5boost7variantI12point_read_t11rget_read_t22changefeed_subscribe_t18changefeed_stamp_t19distribution_read_t13sindex_list_t15sindex_status_tNS_6detail7variant5void_ESA_SA_SA_SA_SA_SA_SA_SA_SA_SA_SA_SA_E13apply_visitorI18rdb_read_visitor_tEENT_11result_typeERSE_ + 53 at 0x1106fd2c5 ()\r\n       30: 0   rethinkdb                           0x00000001106ee98d _ZN5boost13apply_visitorI18rdb_read_visitor_tKNS_7variantI12point_read_t11rget_read_t22changefeed_subscribe_t18changefeed_stamp_t19distribution_read_t13sindex_list_t15sindex_status_tNS_6detail7variant5void_ESC_SC_SC_SC_SC_SC_SC_SC_SC_SC_SC_SC_EEEENT_11result_typeERSF_RT0_ + 29 at 0x1106ee98d ()\r\n       31: 0   rethinkdb                           0x00000001106ece9b _ZN7store_t13protocol_readERK6read_tP15read_response_tP12superblock_tP8signal_t + 427 at 0x1106ece9b ()\r\n       32: 0   rethinkdb                           0x00000001104a3f98 _ZN7store_t4readERK18metainfo_checker_tRK6read_tP15read_response_t13order_token_tP17read_token_pair_tP8signal_t + 312 at 0x1104a3f98 ()\r\n       33: 0   rethinkdb                           0x000000011022627e _ZN15store_subview_t4readERK18metainfo_checker_tRK6read_tP15read_response_t13order_token_tP17read_token_pair_tP8signal_t + 446 at 0x11022627e ()\r\n       34: 0   rethinkdb                           0x000000011022627e _ZN15store_subview_t4readERK18metainfo_checker_tRK6read_tP15read_response_t13order_token_tP17read_token_pair_tP8signal_t + 446 at 0x11022627e ()\r\n       35: 0   rethinkdb                           0x00000001101d8f9a _ZN10listener_t10local_readERK6read_t17state_timestamp_t13order_token_t26fifo_enforcer_read_token_tP8signal_t + 1466 at 0x1101d8f9a ()\r\n       36: 0   rethinkdb                           0x00000001101497ad _ZN13broadcaster_t13listener_readEPNS_12dispatchee_tERK6read_tP15read_response_t17state_timestamp_t13order_token_t26fifo_enforcer_read_token_tP8signal_t + 301 at 0x1101497ad ()\r\n       37: 0   rethinkdb                           0x000000011014b3e1 _ZN13broadcaster_t11single_readERK6read_tP15read_response_tPN20fifo_enforcer_sink_t11exit_read_tE13order_token_tP8signal_t + 801 at 0x11014b3e1 ()\r\n       38: 0   rethinkdb                           0x0000000110149e67 _ZN13broadcaster_t4readERK6read_tP15read_response_tPN20fifo_enforcer_sink_t11exit_read_tE13order_token_tP8signal_t + 343 at 0x110149e67 ()\r\n       39: 0   rethinkdb                           0x000000011022dccc _ZN8master_t8client_t15perform_requestERKN5boost7variantIN22master_business_card_t14read_request_tENS3_15write_request_tENS1_6detail7variant5void_ES8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_EEP8signal_t + 396 at 0x11022dccc ()\r\n       40: 0   rethinkdb                           0x00000001102497b2 _ZN25multi_throttling_server_tIN5boost7variantIN22master_business_card_t14read_request_tENS2_15write_request_tENS0_6detail7variant5void_ES7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_EENS2_28inner_client_business_card_tEP8master_tNSA_8client_tEE8client_t10on_requestERKS8_ + 210 at 0x1102497b2 ()\r\n       41: 0   rethinkdb                           0x000000011024c8fe _ZNSt3__110__function6__funcINS_6__bindIMN25multi_throttling_server_tIN5boost7variantIN22master_business_card_t14read_request_tENS6_15write_request_tENS4_6detail7variant5void_ESB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_SB_EENS6_28inner_client_business_card_tEP8master_tNSE_8client_tEE8client_tEFvRKSC_EJPSI_RNS_12placeholders4__phILi1EEEEEENS_9allocatorISS_EEFvSC_EEclEOSC_ + 590 at 0x11024c8fe ()\r\n       42: 0   rethinkdb                           0x000000011024d5f0 _ZNKSt3__18functionIFvN5boost7variantIN22master_business_card_t14read_request_tENS3_15write_request_tENS1_6detail7variant5void_ES8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_S8_EEEEclES9_ + 160 at 0x11024d5f0 ()\r\n       43: 0   rethinkdb                           0x000000011024d1e7 _ZN9mailbox_tIFvN5boost7variantIN22master_business_card_t14read_request_tENS2_15write_request_tENS0_6detail7variant5void_ES7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_S7_EEEE11read_impl_t4readE17cluster_version_tP13read_stream_t + 343 at 0x11024d1e7 ()\r\n       44: 0   rethinkdb                           0x000000011085db1d _ZN17mailbox_manager_t22mailbox_read_coroutineE9peer_id_t17cluster_version_t11threadnum_tyPNSt3__16vectorIcNS3_9allocatorIcEEEExNS_13force_yield_tE + 461 at 0x11085db1d ()\r\n       45: 0   rethinkdb                           0x00000001108606c4 _ZN26callable_action_instance_tINSt3__16__bindIM17mailbox_manager_tFv9peer_id_t17cluster_version_t11threadnum_tyPNS0_6vectorIcNS0_9allocatorIcEEEExNS2_13force_yield_tEEJPS2_RS3_RS4_S5_RySA_iSB_EEEE10run_actionEv + 996 at 0x1108606c4 ()\r\n       46: 0   rethinkdb                           0x000000010faee59c _ZN25callable_action_wrapper_t3runEv + 108 at 0x10faee59c ()\r\n       47: 0   rethinkdb                           0x000000010fad5a79 _ZN6coro_t3runEv + 937 at 0x10fad5a79 ()\r\n```"
  , issueState = "closed"
  , issueId = Id 38357881
  , issueComments = 1
  , issueMilestone =
      Just
        Milestone
          { milestoneCreator =
              SimpleUser
                { simpleUserId = Id 706854
                , simpleUserLogin = N "AtnNn"
                , simpleUserAvatarUrl =
                    "https://avatars.githubusercontent.com/u/706854?v=3"
                , simpleUserUrl = "https://api.github.com/users/AtnNn"
                , simpleUserType = OwnerUser
                }
          , milestoneDueOn = Nothing
          , milestoneOpenIssues = 1
          , milestoneNumber = 17
          , milestoneClosedIssues = 593
          , milestoneDescription =
              Just
                "The scope of this issue is covered by another issue. The closing comment should link to the other issue."
          , milestoneTitle = "duplicate"
          , milestoneUrl =
              "https://api.github.com/repos/rethinkdb/rethinkdb/milestones/17"
          , milestoneCreatedAt = 2013 (-03) (-29) 20 : 23 : 12 UTC
          , milestoneState = "closed"
          }
  }